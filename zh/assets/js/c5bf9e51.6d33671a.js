"use strict";(self.webpackChunkdocusaurus_code=self.webpackChunkdocusaurus_code||[]).push([[7983],{85162:function(e,n,t){t.d(n,{Z:function(){return o}});var a=t(67294),r=t(34334),l="tabItem_Ymn6";function o(e){var n=e.children,t=e.hidden,o=e.className;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(l,o),hidden:t},n)}},65488:function(e,n,t){t.d(n,{Z:function(){return d}});var a=t(83117),r=t(67294),l=t(34334),o=t(72389),i=t(67392),p=t(7094),c=t(12466),m="tabList__CuJ",u="tabItem_LNqP";function s(e){var n,t,o=e.lazy,s=e.block,d=e.defaultValue,k=e.values,b=e.groupId,h=e.className,N=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),g=null!=k?k:N.map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes}})),v=(0,i.l)(g,(function(e,n){return e.value===n.value}));if(v.length>0)throw new Error('Docusaurus error: Duplicate values "'+v.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var f=null===d?d:null!=(n=null!=d?d:null==(t=N.find((function(e){return e.props.default})))?void 0:t.props.value)?n:N[0].props.value;if(null!==f&&!g.some((function(e){return e.value===f})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+f+'" but none of its children has the corresponding value. Available values are: '+g.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var y=(0,p.U)(),T=y.tabGroupChoices,B=y.setTabGroupChoices,_=(0,r.useState)(f),C=_[0],S=_[1],I=[],E=(0,c.o5)().blockElementScrollPositionUntilNextRender;if(null!=b){var w=T[b];null!=w&&w!==C&&g.some((function(e){return e.value===w}))&&S(w)}var L=function(e){var n=e.currentTarget,t=I.indexOf(n),a=g[t].value;a!==C&&(E(n),S(a),null!=b&&B(b,String(a)))},x=function(e){var n,t=null;switch(e.key){case"ArrowRight":var a,r=I.indexOf(e.currentTarget)+1;t=null!=(a=I[r])?a:I[0];break;case"ArrowLeft":var l,o=I.indexOf(e.currentTarget)-1;t=null!=(l=I[o])?l:I[I.length-1]}null==(n=t)||n.focus()};return r.createElement("div",{className:(0,l.Z)("tabs-container",m)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":s},h)},g.map((function(e){var n=e.value,t=e.label,o=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:C===n?0:-1,"aria-selected":C===n,key:n,ref:function(e){return I.push(e)},onKeyDown:x,onFocus:L,onClick:L},o,{className:(0,l.Z)("tabs__item",u,null==o?void 0:o.className,{"tabs__item--active":C===n})}),null!=t?t:n)}))),o?(0,r.cloneElement)(N.filter((function(e){return e.props.value===C}))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},N.map((function(e,n){return(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==C})}))))}function d(e){var n=(0,o.Z)();return r.createElement(s,(0,a.Z)({key:String(n)},e))}},39511:function(e,n,t){t.d(n,{b:function(){return s}});var a=t(83117),r=t(83321),l=t(78262),o=t(42293),i=t(10155),p=t(15861),c=t(9581),m=t(67294),u=t(54776),s=(0,m.memo)((function(e){var n=e.buttonText,t=e.fullScreen,a=void 0!==t&&t,u=e.title,s=void 0===u?n:u,k=e.children,b=(0,m.useState)(!1),h=b[0],N=b[1],g=(0,m.useState)(a),v=g[0],f=g[1],y=(0,m.useCallback)((function(){N(!0)}),[]),T=(0,m.useCallback)((function(){N(!1)}),[]),B=(0,m.useCallback)((function(){f((function(e){return!e}))}),[]);return m.createElement(m.Fragment,null,m.createElement(r.Z,{onClick:y,variant:"contained"},n),m.createElement(l.Z,{open:h,onClose:T,fullScreen:v,TransitionComponent:d,maxWidth:"md"},m.createElement(o.Z,{sx:{position:"relative"}},m.createElement(i.Z,null,m.createElement(p.Z,{sx:{ml:2,flex:1},variant:"h6",component:"div"},s),m.createElement(r.Z,{autoFocus:!0,color:"inherit",onClick:B},v?"Recover":"Maximize"),m.createElement(r.Z,{autoFocus:!0,color:"inherit",onClick:T},"Close"))),m.createElement(c.Z,null,k)))})),d=m.forwardRef((function(e,n){return m.createElement(u.Z,(0,a.Z)({direction:"up",ref:n},e))}))},88049:function(e,n,t){t.r(n),t.d(n,{assets:function(){return d},contentTitle:function(){return u},default:function(){return h},frontMatter:function(){return m},metadata:function(){return s},toc:function(){return k}});var a=t(83117),r=t(80102),l=(t(67294),t(3905)),o=t(65488),i=t(85162),p=t(39511),c=["components"],m={sidebar_position:1,title:"\u5bf9\u8c61\u7f13\u5b58"},u=void 0,s={unversionedId:"team-work/cache/cache-type/object",id:"team-work/cache/cache-type/object",title:"\u5bf9\u8c61\u7f13\u5b58",description:"\u6240\u8c13\u5bf9\u8c61\u7f13\u5b58\uff0c\u6307\u628aid\u6620\u5c04\u4e3a\u5b9e\u4f53\u5bf9\u8c61\u3002\u8fd9\u662f\u6700\u7b80\u5355\u6700\u57fa\u7840\u7684\u7f13\u5b58",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/team-work/cache/cache-type/object.mdx",sourceDirName:"team-work/cache/cache-type",slug:"/team-work/cache/cache-type/object",permalink:"/jimmer/zh/docs/team-work/cache/cache-type/object",draft:!1,editUrl:"https://github.com/babyfish-ct/jimmer/tree/main/doc/docs/team-work/cache/cache-type/object.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"\u5bf9\u8c61\u7f13\u5b58"},sidebar:"tutorialSidebar",previous:{title:"\u7f13\u5b58\u7c7b\u578b",permalink:"/jimmer/zh/docs/team-work/cache/cache-type/"},next:{title:"\u5173\u8054\u7f13\u5b58",permalink:"/jimmer/zh/docs/team-work/cache/cache-type/association"}},d={},k=[{value:"\u542f\u7528\u5bf9\u8c61\u7f13\u5b58",id:"\u542f\u7528\u5bf9\u8c61\u7f13\u5b58",level:2},{value:"\u4f7f\u7528\u5bf9\u8c61\u7f13\u5b58",id:"\u4f7f\u7528\u5bf9\u8c61\u7f13\u5b58",level:2},{value:"\u57fa\u4e8eid\u7684\u67e5\u8be2",id:"\u57fa\u4e8eid\u7684\u67e5\u8be2",level:3},{value:"\u4f7f\u7528\u5bf9\u8c61\u6293\u53d6\u5668",id:"\u4f7f\u7528\u5bf9\u8c61\u6293\u53d6\u5668",level:3},{value:"\u4e00\u81f4\u6027",id:"\u4e00\u81f4\u6027",level:2}],b={toc:k};function h(e){var n=e.components,m=(0,r.Z)(e,c);return(0,l.kt)("wrapper",(0,a.Z)({},b,m,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"\u6240\u8c13\u5bf9\u8c61\u7f13\u5b58\uff0c\u6307\u628aid\u6620\u5c04\u4e3a\u5b9e\u4f53\u5bf9\u8c61\u3002\u8fd9\u662f\u6700\u7b80\u5355\u6700\u57fa\u7840\u7684\u7f13\u5b58"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"object-cache",src:t(70372).Z,width:"1280",height:"1216"})),(0,l.kt)("h2",{id:"\u542f\u7528\u5bf9\u8c61\u7f13\u5b58"},"\u542f\u7528\u5bf9\u8c61\u7f13\u5b58"),(0,l.kt)(o.Z,{groupId:"language",mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"@Bean\npublic CacheFactory cacheFactory(\n    RedisConnectionFactory connectionFactory,\n    ObjectMapper objectMapper\n) {\n\n    RedisTemplate<String, byte[]> redisTemplate = \n        RedisCaches.cacheRedisTemplate(connectionFactory);\n\n    return new CacheFactory() {\n\n        @Override\n        // highlight-next-line\n        public Cache<?, ?> createObjectCache(@NotNull ImmutableType type) {\n            return new ChainCacheBuilder<>()\n                .add(\n                    new CaffeineBinder<>(512, Duration.ofSeconds(1))\n                )\n                .add(\n                    new RedisValueBinder<>(\n                        redisTemplate, \n                        objectMapper, \n                        type, \n                        Duration.ofMinutes(30)\n                    )\n                )\n                .build();\n        }\n\n        ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n    };\n}\n"))),(0,l.kt)(i.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-kotlin"},"@Bean\nfun cacheFactory(\n    connectionFactory: RedisConnectionFactory,\n    objectMapper: ObjectMapper\n): KCacheFactory {\n\n    val redisTemplate = RedisCaches.cacheRedisTemplate(connectionFactory)\n\n    return object: KCacheFactory {\n\n        // highlight-next-line\n        override fun createObjectCache(type: ImmutableType): Cache<*, *>? =\n            ChainCacheBuilder<Any, Any>()\n                .add(\n                    CaffeineBinder(512, Duration.ofSeconds(1))\n                )\n                .add(\n                    RedisValueBinder(\n                        redisTemplate, \n                        objectMapper, \n                        type, \n                        Duration.ofMinutes(30)\n                    )\n                )\n                .build()\n\n        ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n    }\n}\n")))),(0,l.kt)("h2",{id:"\u4f7f\u7528\u5bf9\u8c61\u7f13\u5b58"},"\u4f7f\u7528\u5bf9\u8c61\u7f13\u5b58"),(0,l.kt)("p",null,"\u6709\u4e24\u79cd\u7528\u6cd5\u53ef\u4ee5\u5229\u7528\u5bf9\u8c61\u7f13\u5b58"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u6309\u7167id ",(0,l.kt)("em",{parentName:"p"},"(\u6216\u5176\u96c6\u5408)")," \u67e5\u8be2\u5b9e\u4f53\u5bf9\u8c61 ",(0,l.kt)("em",{parentName:"p"},"(\u6216\u5176\u96c6\u5408)"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5229\u7528\u5bf9\u8c61\u6293\u53d6\u5668\u6293\u53d6\u5173\u8054\u5bf9\u8c61\u7684\u4efb\u4f55\u975eid\u5b57\u6bb5\u65f6\u3002"))),(0,l.kt)("h3",{id:"\u57fa\u4e8eid\u7684\u67e5\u8be2"},"\u57fa\u4e8eid\u7684\u67e5\u8be2"),(0,l.kt)(o.Z,{groupId:"language",mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"Map<Long, Book> bookMap = sqlClient.findMapByIds(\n        Book.class,\n        Arrays.asList(1L, 2L, 3L, 4L, 999L)\n);\nSystem.out.println(bookMap);\n"))),(0,l.kt)(i.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-kotlin"},"val bookMap = sqlClient.findMapByIds(\n    Book::class,\n    listOf(1L, 2L, 3L, 4L, 999L)\n)\nprintln(bookMap)\n")))),(0,l.kt)("p",null,"Jimmer\u5148\u4eceRedis\u67e5\u627e\u6570\u636e\uff0c\u88ab\u67e5\u627e\u7684\u952e\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"Book-1"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"Book-2"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"Book-3\u3001"),"Book-4",(0,l.kt)("inlineCode",{parentName:"p"},"\u548c"),"Book-999`\u3002"),(0,l.kt)("p",null,"\u5047\u8bbe\u65e0\u6cd5\u5728Redis\u4e2d\u627e\u5230\u8fd9\u4e9b\u952e\u6240\u5bf9\u5e94\u7684\u6570\u636e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"127.0.0.1:6379> keys Book-*\n(empty array)\n")),(0,l.kt)("p",null,"\u6240\u4ee5\uff0c\u6267\u884c\u5982\u4e0bSQL\uff0c\u4ece\u6570\u636e\u5e93\u52a0\u8f7d\u6570\u636e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"select\n    tb_1_.ID,\n    tb_1_.NAME,\n    tb_1_.EDITION,\n    tb_1_.PRICE,\n    tb_1_.STORE_ID\nfrom BOOK tb_1_\nwhere\n    tb_1_.ID in (\n        ? /* 1 */, ? /* 2 */, ? /* 3 */, ? /* 4 */, ? /* 999 */\n    )\n")),(0,l.kt)("p",null,"Jimmer\u4f1a\u628a\u4ece\u67e5\u8be2\u7ed3\u6784\u653e\u5165Redis\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u4eceredis\u4e2d\u67e5\u770b\u8fd9\u4e9b\u6570\u636e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'127.0.0.1:6379> keys Book-*\n1) "Book-4"\n2) "Book-2"\n3) "Book-3"\n4) "Book-1"\n5) "Book-999"\n127.0.0.1:6379> get Book-1\n"{\\"id\\":1,\\"name\\":\\"Learning GraphQL\\",\\"edition\\":1,\\"price\\":50.00,\\"store\\":{\\"id\\":1}}"\n127.0.0.1:6379> get Book-2\n"{\\"id\\":2,\\"name\\":\\"Learning GraphQL\\",\\"edition\\":2,\\"price\\":55.00,\\"store\\":{\\"id\\":1}}"\n127.0.0.1:6379> get Book-3\n"{\\"id\\":3,\\"name\\":\\"Learning GraphQL\\",\\"edition\\":3,\\"price\\":51.00,\\"store\\":{\\"id\\":1}}"\n127.0.0.1:6379> get Book-4\n"{\\"id\\":4,\\"name\\":\\"Effective TypeScript\\",\\"edition\\":1,\\"price\\":73.00,\\"store\\":{\\"id\\":1}}"\n127.0.0.1:6379> get Book-999\n"<null>"\n127.0.0.1:6379>\n')),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"\u5176\u4e2d\uff0c\u4e0d\u5b58\u5728\u6570\u636e",(0,l.kt)("inlineCode",{parentName:"p"},"Book-999"),"\u4e5f\u4f1a\u4ee5\u7279\u6b8a\u503c",(0,l.kt)("inlineCode",{parentName:"p"},"<null>"),"\u88ab\u7f13\u5b58\u8d77\u6765 ")),(0,l.kt)("p",null,"\u6beb\u65e0\u7591\u95ee\uff0c\u5728Redis\u4e2d\u7684\u6570\u636e\u56e0\u8d85\u65f6\u800c\u88ab\u6e05\u9664\u4e4b\u524d\uff0c\u518d\u6b21\u6267\u884c\u4e0a\u8ff0Java/Kotlin\u4ee3\u7801\uff0c\u5c06\u76f4\u63a5\u4eceRedis\u4e2d\u8fd4\u56de\u6570\u636e\uff0c\u65e0\u4efb\u4f55SQL\u88ab\u751f\u6210\u3002"),(0,l.kt)("h3",{id:"\u4f7f\u7528\u5bf9\u8c61\u6293\u53d6\u5668"},"\u4f7f\u7528\u5bf9\u8c61\u6293\u53d6\u5668"),(0,l.kt)(o.Z,{groupId:"language",mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'BookTable table = BookTable.$;\nList<Book> books = sqlClient\n    .createQuery(table)\n    .where(table.name().like("GraphQL"))\n    .select(\n        table.fetch(\n            BookFetcher.$\n                .allScalarFields()\n                // highlight-next-line\n                .store(\n                    BookStoreFetcher.$\n                        .name()\n                )\n        )\n    )\n    .execute();\nSystem.out.println(books);\n'))),(0,l.kt)(i.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-kotlin"},'val books = sqlClient\n    .createQuery(Book::class) {\n        where(table.name like "GraphQL")\n        select(\n            table.fetchBy {\n                allScalarFields()\n                // highlight-next-line\n                store {\n                    name()\n                }\n            }\n        )\n    }\n    .execute()\nprintln(books)\n')))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u7b2c\u4e00\u6761SQL\uff1a\u67e5\u8be2\u805a\u5408\u6839"),(0,l.kt)("p",{parentName:"li"},"\u9996\u5148\u67e5\u8be2\u805a\u5408\u6839\u5bf9\u8c61\uff0c\u6267\u884c\u5982\u4e0bSQL"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"select\n    tb_1_.ID,\n    tb_1_.NAME,\n    tb_1_.EDITION,\n    tb_1_.PRICE,\n    tb_1_.STORE_ID\nfrom BOOK tb_1_\nwhere\n    tb_1_.NAME like ? /* %GraphQL% */\n")),(0,l.kt)("p",{parentName:"li"},"\u8fd9\u91cc\u5b9e\u73b0\u4e86\u4ee3\u7801\u4e2d\u7684\u6a21\u7cca\u67e5\u8be2\uff0c\u5f97\u5230\u4e86\u4e00\u4e9bBook\u5bf9\u8c61\u3002\u8fd9\u79cd\u88ab\u7528\u6237\u76f4\u63a5\u67e5\u8be2\u800c\u5f97\u7684\u5bf9\u8c61\u53eb\u505a\u805a\u5408\u6839\u5bf9\u8c61"),(0,l.kt)("admonition",{parentName:"li",type:"caution"},(0,l.kt)("p",{parentName:"admonition"},"Jimmer\u4e0d\u4f1a\u5bf9\u7528\u6237\u67e5\u8be2\u8fd4\u56de\u7684\u805a\u5408\u5bf9\u8c61\u8fdb\u884c\u7f13\u5b58\uff0c\u56e0\u4e3a\u8fd9\u79cd\u67e5\u8be2\u7ed3\u679c\u7684\u4e00\u81f4\u6027\u65e0\u6cd5\u4fdd\u8bc1\u3002\n\u5373\u4fbf\u9700\u8981\u4ee5\u727a\u7272\u4e00\u81f4\u6027\u4e3a\u4ee3\u4ef7\u5bf9\u5176\u7f13\u5b58\uff0c\u4e5f\u662f\u7528\u6237\u7684\u4e1a\u52a1\u95ee\u9898\uff0c\u4e0d\u662f\u5e94\u8be5\u7531\u6846\u67b6\u62bd\u8c61\u5e76\u7edf\u4e00\u7684\u884c\u4e3a\u3002"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u7b2c\u4e8c\u6761SQL\uff1a\u6293\u53d6\u591a\u5bf9\u4e00\u5173\u8054",(0,l.kt)("inlineCode",{parentName:"p"},"Book.store")),(0,l.kt)("p",{parentName:"li"},"\u4e0a\u9762\u7684\u4ee3\u7801\u4f1a\u5f97\u5230\u4e00\u7cfb\u5217\u805a\u5408\u6839\u5bf9\u8c61\uff0c\u5982\u679c\u6570\u636e\u5e93\u91c7\u7528\u5b98\u65b9\u4f8b\u5b50\u7684\u6570\u636e\uff0c\u4f1a\u5f97\u52306\u4e2a\u805a\u5408\u6839\u5bf9\u8c61\u3002"),(0,l.kt)("p",{parentName:"li"},"\u4ee3\u7801\u4e2d\u7684\u5bf9\u8c61\u6293\u53d6\u5668\u5305\u542b\u4e86\u591a\u5bf9\u4e00\u5173\u8054",(0,l.kt)("inlineCode",{parentName:"p"},"Book.store"),"\uff0c\u4e14\u671f\u671b\u67e5\u8be2\u5173\u8054\u5bf9\u8c61\u7684\u975eid\u5c5e\u6027 ",(0,l.kt)("em",{parentName:"p"},"(\u5f53\u524d\u8868\u7684\u5916\u952e\u65e0\u6cd5\u8868\u8fbe\u7684\u4fe1\u606f)"),"\uff0c\u6240\u4ee5\uff0cJimmer\u4f1a\u4e3a\u6240\u6709\u805a\u5408\u6839\u5bf9\u8c61\u67e5\u8be2\u5173\u8054\u5bf9\u8c61\u3002"),(0,l.kt)("p",{parentName:"li"},"\u5e78\u8fd0\u7684\u662f\uff0c\u5173\u8054\u5c5e\u6027",(0,l.kt)("inlineCode",{parentName:"p"},"Book.store"),"\u57fa\u4e8e\u771f\u5b9e\u5916\u952e\uff0c\u5916\u952e\u672c\u8eab\u5c31\u8868\u793a\u4e86\u7236\u5bf9\u8c61\u7684id\uff0c\u800c\u65e0\u9700\u901a\u8fc7\u989d\u5916\u67e5\u8be2\u6216",(0,l.kt)("a",{parentName:"p",href:"./association"},"\u5173\u8054\u7f13\u5b58"),"\u5373\u53ef\u5f97\u5230\u5173\u8054\u5bf9\u8c61id\u3002"),(0,l.kt)("p",{parentName:"li"},"\u5047\u8bbe\u8fd96\u6761BOOK\u6570\u636e\u6240\u5bf9\u5e94\u7684\u5916\u952e",(0,l.kt)("inlineCode",{parentName:"p"},"STORE_ID"),"\u53bb\u91cd\u540e\u6709\u4e24\u4e2a\u503c\uff0c1\u548c2\u3002"),(0,l.kt)("p",{parentName:"li"},"Jimmer\u5148\u4eceRedis\u67e5\u627e\u6570\u636e\uff0c\u88ab\u67e5\u627e\u7684\u952e\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"BookStore-1"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"BookStore-2"),"\u3002"),(0,l.kt)("p",{parentName:"li"},"\u5047\u8bbe\u65e0\u6cd5\u5728Redis\u4e2d\u627e\u5230\u8fd9\u4e9b\u952e\u6240\u5bf9\u5e94\u7684\u6570\u636e"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre"},"127.0.0.1:6379> keys BookStore-*\n(empty array)\n")),(0,l.kt)("p",{parentName:"li"},"\u90a3\u4e48\uff0c\u6267\u884c\u5982\u4e0bSQL\uff0c\u4ece\u6570\u636e\u5e93\u52a0\u8f7d\u6570\u636e"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"select\n    tb_1_.ID,\n    tb_1_.NAME,\n    tb_1_.WEBSITE\nfrom BOOK_STORE tb_1_\nwhere\n    tb_1_.ID in (\n        ? /* 1 */, ? /* 2 */\n    )\n")),(0,l.kt)("admonition",{parentName:"li",type:"info"},(0,l.kt)("p",{parentName:"admonition"},"\u5982\u679c\u6ca1\u6709\u542f\u7528\u7f13\u5b58\uff0c\u751f\u6210\u7684SQL\u4f1a\u6709\u5dee\u5f02"),(0,l.kt)(p.b,{buttonText:"\u4e0d\u542f\u7528\u7f13\u5b58\u7684\u5dee\u5f02",mdxType:"ViewMore"},(0,l.kt)("p",{parentName:"admonition"},"\u6709\u7f13\u5b58\u6a21\u5f0f\u4e0b\uff0c\u8fd9\u91cc\u751f\u6210\u7684SQL\u4e3a"),(0,l.kt)("pre",{parentName:"admonition"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"select\n    tb_1_.ID,\n    tb_1_.NAME,\n    /* highlight-next-line */\n    tb_1_.WEBSITE\n...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n")),(0,l.kt)("p",{parentName:"admonition"},"\u7136\u800c\uff0cJava/Kotlin\u4ee3\u7801\u4e2d\u7684\u5bf9\u8c61\u6293\u53d6\u5668\uff0c\u53ea\u8981\u6c42\u67e5\u8be2\u5173\u8054\u5bf9\u8c61\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"name"),"\uff0c\u6ca1\u6709\u8981\u6c42\u67e5\u8be2\u5173\u8054\u5bf9\u8c61\u7684\u6240\u6709\u5b57\u6bb5"),(0,l.kt)(o.Z,{groupId:"language",mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",{parentName:"admonition"},(0,l.kt)("code",{parentName:"pre",className:"language-java"},"...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n.select(\n    table.fetch(\n        BookFetcher.$\n            .allScalarFields()\n            .store(\n                BookStoreFetcher.$\n                    // highlight-next-line\n                    .name()\n            )\n    )\n)\n"))),(0,l.kt)(i.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,l.kt)("pre",{parentName:"admonition"},(0,l.kt)("code",{parentName:"pre",className:"language-kotlin"},"...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\nselect(\n    table.fetchBy {\n        allScalarFields()\n        store {\n            // highlight-next-line\n            name()\n        }\n    }\n)\n")))),(0,l.kt)("p",{parentName:"admonition"},"\u5728\u7f13\u5b58\u6a21\u5f0f\u4e0b\uff0c\u5373\u4f7f\u5bf9\u8c61\u6293\u53d6\u5668\u4e0d\u9700\u8981\u5173\u8054\u5bf9\u8c61\u7684\u6240\u6709\u975e\u5173\u8054\u5c5e\u6027\uff0c\u4e5f\u4f1a\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u5173\u8054\u5bf9\u8c61\u7684\u6240\u6709\u975e\u5173\u8054\u5c5e\u6027\u3002"),(0,l.kt)("p",{parentName:"admonition"},(0,l.kt)("strong",{parentName:"p"},"\u53ea\u6709\u8fd9\u6837\u505a\uff0c\u7f13\u5b58\u4e2d\u7684\u5bf9\u8c61\u624d\u53ef\u5bf9\u4efb\u4f55\u4e1a\u52a1\u573a\u666f\u5177\u6709\u53ef\u91cd\u7528\u4ef7\u503c\u3002")),(0,l.kt)("p",{parentName:"admonition"},"\u5982\u679c\u4e0d\u542f\u7528\u7f13\u5b58\uff0cJimmer\u4f1a\u4fdd\u8bc1\u751f\u6210\u7684SQL\u80fd\u67e5\u8be2\u7684\u4fe1\u606f\u521a\u597d\u6ee1\u8db3\u5f53\u524d\u4e1a\u52a1\u573a\u666f\u7684\u9700\u8981"),(0,l.kt)("pre",{parentName:"admonition"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"select\n    tb_1_.ID,\n    tb_1_.NAME,\n    // \u8fd9\u91cc\uff0c\u4e0d\u67e5\u8be2WEBSITE\u5217\nfrom BOOK_STORE tb_1_\n...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n")))),(0,l.kt)("p",{parentName:"li"},"Jimmer\u4f1a\u628a\u4ece\u67e5\u8be2\u7ed3\u6784\u653e\u5165Redis\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u4eceredis\u4e2d\u67e5\u770b\u8fd9\u4e9b\u6570\u636e"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre"},'127.0.0.1:6379> keys BookStore-*\n1) "BookStore-1"\n2) "BookStore-2"\n127.0.0.1:6379> get BookStore-1\n"{\\"id\\":1,\\"name\\":\\"O\'REILLY\\",\\"website\\":null}"\n127.0.0.1:6379> get BookStore-2\n"{\\"id\\":2,\\"name\\":\\"MANNING\\",\\"website\\":null}"\n127.0.0.1:6379>\n')),(0,l.kt)("p",{parentName:"li"},"\u6beb\u65e0\u7591\u95ee\uff0c\u5728Redis\u4e2d\u7684\u6570\u636e\u56e0\u8d85\u65f6\u800c\u88ab\u6e05\u9664\u4e4b\u524d\uff0c\u518d\u6b21\u6267\u884c\u4e0a\u8ff0Java/Kotlin\u4ee3\u7801\uff0c\u5c06\u76f4\u63a5\u4eceRedis\u4e2d\u8fd4\u56de\u5173\u8054\u6570\u636e\uff0c\u7b2c\u4e8c\u6761SQL\u4e0d\u4f1a\u88ab\u751f\u6210\u3002"))),(0,l.kt)("p",null,"\u6700\u7ec8\uff0cJimmer\u628a\u4e24\u4e2a\u6b65\u9aa4\u7684\u7ed3\u679c\u62fc\u63a5\u5728\u4e00\u8d77\uff0c\u4f5c\u4e3a\u6700\u7ec8\u8fd4\u56de\u7ed9\u7528\u6237\u7684\u6570\u636e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'[\n    {\n        "id":1,\n        "name":"Learning GraphQL",\n        "edition":1,\n        "price":50,\n        // highlight-next-line\n        "store":{\n            "id":1,\n            "name":"O\'REILLY"\n        }\n    },\n    {\n        ...\u7565...\n    },\n    {\n        ...\u7565...\n    },\n    {\n        "id":10,\n        "name":"GraphQL in Action",\n        "edition":1,\n        "price":80,\n        // highlight-next-line\n        "store":{\n            "id":2,\n            "name":"MANNING"\n        }\n    },\n    {\n        ...\u7565...\n    },\n    {\n        ...\u7565...\n    }\n]\n')),(0,l.kt)("h2",{id:"\u4e00\u81f4\u6027"},"\u4e00\u81f4\u6027"),(0,l.kt)("admonition",{type:"caution"},(0,l.kt)("p",{parentName:"admonition"},"\u8981\u4f7f\u7528Jimmer\u7f13\u5b58\u7684\u81ea\u52a8\u4e00\u81f4\u6027\uff0c\u9700\u8981\u5148\u542f\u7528",(0,l.kt)("a",{parentName:"p",href:"../../mutation/trigger"},"\u89e6\u53d1\u5668"))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5047\u5982\u542f\u7528\u4e86BinLog\u89e6\u53d1\u5668\uff0c\u7528\u4efb\u4f55\u624b\u6bb5\u4fee\u6539\u6570\u636e\u5e93\u90fd\u53ef\u4ee5\u5bfc\u81f4Jimmer\u7f13\u5b58\u4e00\u81f4\u6027\u7684\u4ecb\u5165\u3002\u6bd4\u5982\u76f4\u63a5\u5728SQL IDE\u4e2d\u6267\u884c\u5982\u4e0bSQL"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"update BOOK_STORE \nset WEBSITE = 'https://www.manning.com' \nwhere ID = 2;\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5047\u5982\u53ea\u542f\u7528\u4e86Transaction\u89e6\u53d1\u5668\uff0c\u5219\u5fc5\u987b\u7528Jimmer\u7684API\u4fee\u6539\u6570\u636e\u5e93"),(0,l.kt)(o.Z,{groupId:"language",mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-java"},'BookStoreTable table = BookStoreTable.$;\nsqlClient\n    .createUpdate(table)\n    .set(table.website(), "https://www.manning.com")\n    .where(table.id().eq(2L))\n    .execute();\n'))),(0,l.kt)(i.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-kotlin"},'sqlClient\n    .createUpdate(BookStore::class) {\n        set(table.website, "https://www.manning.com")\n        where(table.id eq 2L)\n    }\n    .execute()\n')))))),(0,l.kt)("p",null,"\u65e0\u8bba\u901a\u8fc7\u4e0a\u8ff0\u4f55\u79cd\u65b9\u5f0f\u4fee\u6539\u6570\u636e\uff0c\u4f60\u90fd\u4f1a\u5728\u770b\u5230\u5982\u4e0b\u65e5\u5fd7\u8f93\u51fa"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"Delete data from redis: [BookStore-2]\n")))}h.isMDXComponent=!0},70372:function(e,n,t){n.Z=t.p+"assets/images/object-cache-4a9d5b4cb61322890552a5508785c18c.jpeg"}}]);