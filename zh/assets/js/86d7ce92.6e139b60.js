"use strict";(self.webpackChunkdocusaurus_code=self.webpackChunkdocusaurus_code||[]).push([[372],{3905:function(e,n,t){t.d(n,{Zo:function(){return s},kt:function(){return m}});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var u=a.createContext({}),c=function(e){var n=a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},s=function(e){var n=c(e.components);return a.createElement(u.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,u=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),d=c(t),m=r,k=d["".concat(u,".").concat(m)]||d[m]||p[m]||o;return t?a.createElement(k,l(l({ref:n},s),{},{components:t})):a.createElement(k,l({ref:n},s))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,l=new Array(o);l[0]=d;var i={};for(var u in n)hasOwnProperty.call(n,u)&&(i[u]=n[u]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var c=2;c<o;c++)l[c]=t[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},85162:function(e,n,t){t.d(n,{Z:function(){return l}});var a=t(67294),r=t(34334),o="tabItem_Ymn6";function l(e){var n=e.children,t=e.hidden,l=e.className;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(o,l),hidden:t},n)}},65488:function(e,n,t){t.d(n,{Z:function(){return m}});var a=t(83117),r=t(67294),o=t(34334),l=t(72389),i=t(67392),u=t(7094),c=t(12466),s="tabList__CuJ",p="tabItem_LNqP";function d(e){var n,t,l=e.lazy,d=e.block,m=e.defaultValue,k=e.values,b=e.groupId,h=e.className,f=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),v=null!=k?k:f.map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes}})),y=(0,i.l)(v,(function(e,n){return e.value===n.value}));if(y.length>0)throw new Error('Docusaurus error: Duplicate values "'+y.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var N=null===m?m:null!=(n=null!=m?m:null==(t=f.find((function(e){return e.props.default})))?void 0:t.props.value)?n:f[0].props.value;if(null!==N&&!v.some((function(e){return e.value===N})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+N+'" but none of its children has the corresponding value. Available values are: '+v.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var _=(0,u.U)(),S=_.tabGroupChoices,B=_.setTabGroupChoices,g=(0,r.useState)(N),C=g[0],O=g[1],E=[],T=(0,c.o5)().blockElementScrollPositionUntilNextRender;if(null!=b){var I=S[b];null!=I&&I!==C&&v.some((function(e){return e.value===I}))&&O(I)}var A=function(e){var n=e.currentTarget,t=E.indexOf(n),a=v[t].value;a!==C&&(T(n),O(a),null!=b&&B(b,String(a)))},L=function(e){var n,t=null;switch(e.key){case"ArrowRight":var a,r=E.indexOf(e.currentTarget)+1;t=null!=(a=E[r])?a:E[0];break;case"ArrowLeft":var o,l=E.indexOf(e.currentTarget)-1;t=null!=(o=E[l])?o:E[E.length-1]}null==(n=t)||n.focus()};return r.createElement("div",{className:(0,o.Z)("tabs-container",s)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":d},h)},v.map((function(e){var n=e.value,t=e.label,l=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:C===n?0:-1,"aria-selected":C===n,key:n,ref:function(e){return E.push(e)},onKeyDown:L,onFocus:A,onClick:A},l,{className:(0,o.Z)("tabs__item",p,null==l?void 0:l.className,{"tabs__item--active":C===n})}),null!=t?t:n)}))),l?(0,r.cloneElement)(f.filter((function(e){return e.props.value===C}))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},f.map((function(e,n){return(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==C})}))))}function m(e){var n=(0,l.Z)();return r.createElement(d,(0,a.Z)({key:String(n)},e))}},19109:function(e,n,t){t.r(n),t.d(n,{assets:function(){return d},contentTitle:function(){return s},default:function(){return b},frontMatter:function(){return c},metadata:function(){return p},toc:function(){return m}});var a=t(83117),r=t(80102),o=(t(67294),t(3905)),l=t(65488),i=t(85162),u=["components"],c={sidebar_position:3,title:"\u5173\u8054\u7f13\u5b58"},s=void 0,p={unversionedId:"tutorial/query/cache/association",id:"tutorial/query/cache/association",title:"\u5173\u8054\u7f13\u5b58",description:"\u57fa\u672c\u6982\u5ff5",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/tutorial/query/cache/association.mdx",sourceDirName:"tutorial/query/cache",slug:"/tutorial/query/cache/association",permalink:"/jimmer/zh/docs/tutorial/query/cache/association",draft:!1,editUrl:"https://github.com/babyfish-ct/jimmer/tree/main/doc/docs/tutorial/query/cache/association.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"\u5173\u8054\u7f13\u5b58"},sidebar:"tutorialSidebar",previous:{title:"\u5bf9\u8c61\u7f13\u5b58",permalink:"/jimmer/zh/docs/tutorial/query/cache/object"},next:{title:"\u8ba1\u7b97\u7f13\u5b58",permalink:"/jimmer/zh/docs/tutorial/query/cache/calc"}},d={},m=[{value:"\u57fa\u672c\u6982\u5ff5",id:"\u57fa\u672c\u6982\u5ff5",level:2},{value:"\u542f\u7528\u5173\u8054\u7f13\u5b58",id:"\u542f\u7528\u5173\u8054\u7f13\u5b58",level:2},{value:"\u4f53\u9a8c",id:"\u4f53\u9a8c",level:2},{value:"\u6709\u7f13\u5b58\u6a21\u5f0f\u7684SQL",id:"\u6709\u7f13\u5b58\u6a21\u5f0f\u7684sql",level:3},{value:"\u5bf9\u6bd4\u65e0\u7f13\u5b58\u6a21\u5f0f\u7684SQL",id:"\u5bf9\u6bd4\u65e0\u7f13\u5b58\u6a21\u5f0f\u7684sql",level:3},{value:"\u5173\u8054\u7f13\u5b58\u4e00\u81f4\u6027",id:"\u5173\u8054\u7f13\u5b58\u4e00\u81f4\u6027",level:2}],k={toc:m};function b(e){var n=e.components,c=(0,r.Z)(e,u);return(0,o.kt)("wrapper",(0,a.Z)({},k,c,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"\u57fa\u672c\u6982\u5ff5"},"\u57fa\u672c\u6982\u5ff5"),(0,o.kt)("p",null,"\u5173\u8054\u7f13\u5b58\u628a\u5f53\u524d\u5bf9\u8c61id\u6620\u5c04\u4e3a\u5173\u8054\u5bf9\u8c61id\u6216\u5176\u96c6\u5408\u3002"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"association-cache",src:t(50684).Z,width:"1473",height:"1399"})),(0,o.kt)("p",null,"\u8bfb\u8005\u53ef\u80fd\u5bf9\u5176\u4e2d\u591a\u5bf9\u4e00\u5173\u8054\u7f13\u5b58",(0,o.kt)("inlineCode",{parentName:"p"},"Book.store-*"),"\u611f\u5230\u7591\u60d1\u3002\u5bf9\u4e8eBook\u6570\u636e\u800c\u8a00\uff0c\u7236\u5bf9\u8c61\u7684id\u4e0d\u5c31\u662f\u5f53\u524d\u5bf9\u8c61\u7684\u5916\u952e\u5417\uff1f\u4e3a\u4ec0\u4e48\u9700\u8981\u591a\u5bf9\u4e00\u7f13\u5b58\u5462\uff1f"),(0,o.kt)("p",null,"\u4e8b\u5b9e\u4e0a\uff0c\u8fd9\u7c7b\u5173\u8054\u7684\u786e\u4e0d\u662f\u4e00\u5b9a\u9700\u8981\u7684\u3002\u4f46\u662f\uff0c\u5f53\u4ee5\u524d\u4efb\u4f55\u4e00\u79cd\u6761\u4ef6\u6210\u7acb\u65f6\uff0c\u5c31\u9700\u8981\u591a\u5bf9\u4e00\u5173\u8054\u7f13\u5b58\u3002"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u591a\u5bf9\u4e00\u5173\u8054\u57fa\u4e8e\u4e2d\u95f4\u8868\uff0c\u800c\u975e\u5916\u952e"),(0,o.kt)("li",{parentName:"ul"},"\u591a\u5bf9\u4e00\u5173\u8054\u7684\u7236\u5bf9\u8c61\u4f7f\u7528\u4e86\u5168\u5c40\u8fc7\u6ee4\u5668\uff0c\u5916\u952e\u975e\u7a7a\u4e0d\u4ee3\u8868\u7236\u5bf9\u8c61\u975enull"),(0,o.kt)("li",{parentName:"ul"},"\u5982\u679c\u4f7f\u7528Jimmer\u7684GraphQL\u652f\u6301\uff0c\u6709\u53ef\u80fd\u6839\u636e\u5916\u952e\u5b57\u6bb5\u5c1a\u672a\u88ab\u67e5\u8be2\u7684\u6570\u636e\u67e5\u8be2\u7236\u5bf9\u8c61\u3002")),(0,o.kt)("p",null,"\u5176\u4ed6\u5173\u8054\u7f13\u5b58\u76f8\u5bf9\u597d\u7406\u89e3\uff0c\u65e0\u9700\u9610\u8ff0\u3002"),(0,o.kt)("h2",{id:"\u542f\u7528\u5173\u8054\u7f13\u5b58"},"\u542f\u7528\u5173\u8054\u7f13\u5b58"),(0,o.kt)("p",null,"\u7ee7\u7eed\u4fee\u6539",(0,o.kt)("inlineCode",{parentName:"p"},"CacheConfig")),(0,o.kt)(l.Z,{groupId:"language",mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},"package com.example.cfg;\n\n...\u7701\u7565import\u8bed\u53e5...\n\npublic class CacheConfig {\n\n    ...\u7701\u7565\u5176\u4ed6\u914d\u7f6e...\n\n    @Bean\n    public CacheFactory cacheFactory(\n        RedisTemplate<String, byte[]> redisTemplate,\n        ObjectMapper objectMapper\n    ) {\n        return new CacheFactory() {\n\n            @Override\n            // highlight-next-line\n            public Cache<?, ?> createAssociatedIdCache( \u2776\n                ImmutableProp prop \u2778\n            ) {\n                \u2779\n                return new ChainCacheBuilder<>()\n                    .add(\n                        new CaffeineBinder<>(512, Duration.ofSeconds(1))\n                    )\n                    .add(\n                        new RedisValueBinder<>(\n                            redisTemplate, \n                            objectMapper, \n                            type, \n                            Duration.ofMinutes(10))\n                    )\n                    .build();\n            }\n\n            @Override\n            // highlight-next-line\n            public Cache<?, List<?>> createAssociatedIdListCache( \u2777\n                ImmutableProp prop \u2778\n            ) {\n                \u2779\n                return new ChainCacheBuilder<Object, List<?>>() \n                    .add(\n                        new CaffeineBinder<>(512, Duration.ofSeconds(1))\n                    )\n                    .add(\n                        new RedisValueBinder<>(\n                            redisTemplate, \n                            objectMapper, \n                            type, \n                            Duration.ofMinutes(10))\n                    )\n                    .build();\n            }\n\n            @Override\n            public Cache<?, ?> createObjectCache( \u277a\n                ImmutableType type\n            ) {\n                ...\u5ffd\u7565\u4e0a\u4e00\u7bc7\u6587\u6863\u4e2d\u5df2\u7ecf\u8bb2\u89e3\u7684\u4ee3\u7801...\n            }\n\n            ...\u5176\u4ed6\u53ef\u8986\u76d6\u65b9\u6cd5\u540e\u6587\u4ecb\u7ecd...\n        };\n    }\n\n    ...\u7701\u7565\u5176\u4ed6\u914d\u7f6e...\n}\n"))),(0,o.kt)(i.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},"package com.example.cfg\n\n...\u7701\u7565import\u8bed\u53e5...\n\n@Configuration\nclass CacheConfig {\n\n    @Bean\n    fun cacheFactory(\n        redisTemplate: RedisTemplate<String, ByteArray>,\n        objectMapper: ObjectMapper\n    ): CacheFactory =\n\n        object: CacheFactory {\n\n            override fun createAssociatedIdCache( \u2776\n                prop: ImmutableProp \u2778\n            ): Cache<*, *>? =\n                \u2779\n                ChainCacheBuilder<Any, Any>()\n                    .add(\n                        CaffeineBinder(512, Duration.ofSeconds(1))\n                    )\n                    .add(\n                        RedisValueBinder(\n                            redisTemplate, \n                            objectMapper, \n                            type, \n                            Duration.ofMinutes(10))\n                    )\n                    .build()\n\n            override fun createAssociatedIdListCache( \u2777\n                prop: ImmutableProp \u2778\n            ): Cache<*, List<*>? =\n                \u2779\n                ChainCacheBuilder<Any, List<*>()\n                    .add(\n                        CaffeineBinder(512, Duration.ofSeconds(1))\n                    )\n                    .add(\n                        RedisValueBinder(\n                            redisTemplate, \n                            objectMapper, \n                            type, \n                            Duration.ofMinutes(10))\n                    )\n                    .build()\n\n            override fun createObjectCache( \u277a\n                type: ImmutableType\n            ): Cache<*, *>? =\n                ...\u5ffd\u7565\u4e0a\u4e00\u7bc7\u6587\u6863\u4e2d\u5df2\u7ecf\u8bb2\u89e3\u7684\u4ee3\u7801...\n\n            ...\u5176\u4ed6\u53ef\u8986\u76d6\u65b9\u6cd5\u540e\u6587\u4ecb\u7ecd...\n        }\n\n    ...\u7701\u7565\u5176\u4ed6\u914d\u7f6e...\n}\n")))),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"createAssociatedIdCache"),"\uff1a\u4e3a\u5f15\u7528\u5173\u8054\uff08\u4e00\u5bf9\u4e00\uff0c\u591a\u5bf9\u4e00\uff09\u521b\u5efa\u7f13\u5b58")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"createAssociatedIdListCache"),"\uff1a\u4e3a\u96c6\u5408\u5173\u8054\uff08\u4e00\u5bf9\u591a\uff0c\u591a\u5bf9\u591a\uff09\u521b\u5efa\u7f13\u5b58")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"prop"),": \u5f85\u88ab\u7f13\u5b58\u7684\u5173\u8054\u5c5e\u6027\u3002"),(0,o.kt)("p",{parentName:"li"},"Jimmer\u4f1a\u904d\u5386\u6240\u6709\u5b9e\u4f53\u5c5e\u6027\uff0c\u5bf9\u6bcf\u4e2a\u7c7b\u578b\u90fd\u8c03\u7528\u4e00\u6b21",(0,o.kt)("inlineCode",{parentName:"p"},"createAssociatedIdCache"),"\u6216",(0,o.kt)("inlineCode",{parentName:"p"},"createAssociatedIdListCache"),"\uff0c\u53c2\u6570",(0,o.kt)("inlineCode",{parentName:"p"},"prop"),"\u5c31\u662f\u5f53\u524d\u904d\u5386\u5230\u7684\u5173\u8054\u5c5e\u6027\u3002"),(0,o.kt)("p",{parentName:"li"},"\u7528\u6237\u53ef\u4ee5\u5bf9\u53c2\u6570",(0,o.kt)("inlineCode",{parentName:"p"},"prop"),"\u8fdb\u884c\u5224\u65ad\uff0c\u5982\u679c\u6b64\u7c7b\u578b\u9700\u8981\u5173\u8054\u7f13\u5b58\uff0c\u8fd4\u56de\u975enull\u5bf9\u8c61\uff1b\u5426\u5219\uff0c\u8fd4\u56denull\u3002"),(0,o.kt)("p",{parentName:"li"},"\u5f88\u660e\u663e\uff0c\u672c\u4f8b\u5ffd\u7565\u4e86\u53c2\u6570",(0,o.kt)("inlineCode",{parentName:"p"},"type"),"\uff0c\u65e0\u6761\u4ef6\u8ba9\u6240\u6709\u5173\u8054\u5c5e\u6027\u90fd\u652f\u6301\u5173\u8054\u7f13\u5b58\u3002")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"\u8fd9\u91cc\uff0c\u4ee3\u7801\u548c",(0,o.kt)("a",{parentName:"p",href:"./object"},"\u5bf9\u8c61\u7f13\u5b58"),"\u4e00\u6587\u4e2d\u6240\u6ca1\u533a\u522b\uff0c\u4e0d\u518d\u8d58\u8ff0\u3002")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"\u9664\u4e86\u672c\u6587\u8bb2\u89e3\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"createAssociatedIdCache"),"\u548c",(0,o.kt)("inlineCode",{parentName:"p"},"createAssociatedIdListCache"),"\u5916\uff0c\n\u4e0a\u4e00\u7bc7\u6587\u6863\u4e2d\u8bb2\u89e3\u8fc7\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"createObjectCache"),"\u4e5f\u5f88\u91cd\u8981\uff0c\u56e0\u4e3a\u4e3a\u5173\u8054\u5bf9\u8c61\u6240\u5c5e\u7c7b\u578b\u6307\u5b9a\u5bf9\u8c61\u7f13\u5b58\u3002"),(0,o.kt)("p",{parentName:"li"},"\u8fd9\u6837\uff0c\u5173\u8054\u7f13\u5b58\u548c\u5bf9\u8c61\u7f13\u5b58\u53ef\u4ee5\u7ed3\u5408\u8d77\u6765\uff0c\u6700\u7ec8\u4e3a\u7528\u6237\u63d0\u4f9b\u4efb\u610f\u590d\u6742\u6570\u636e\u7ed3\u6784\u7684\u7f13\u5b58\u3002"))),(0,o.kt)("h2",{id:"\u4f53\u9a8c"},"\u4f53\u9a8c"),(0,o.kt)(l.Z,{groupId:"language",mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},'// \u9996\u6b21\u6267\u884c\u65f6\u7f13\u5b58\u65e0\u6570\u636e\uff0c\u901a\u8fc7SQL\u83b7\u53d6\u6240\u6709\u6570\u636e\nList<BookStore> stores = bookStoreRepository.findAll(\n    BookStoreFetcher.$\n        .allScalarFields()\n        .books( \u2776\n            BookFetcher.$\n                .allScalarFields()\n                .authors( \u2777\n                        AuthorFetcher.$\n                                .allScalarFields()\n                )\n        )\n);\nSystem.out.println(stores);\n\nSystem.out.println("----------------");\n\n// \u518d\u6b21\u6267\u884c\u65f6\u7f13\u5b58\u6709\u6570\u636e\uff0c\u9664\u805a\u5408\u6839\u5bf9\u8c61\u5916\u7684\u5176\u4ed6\u4fe1\u606f\u65e0\u9700\u901a\u8fc7SQL\u83b7\u53d6\nList<BookStore> stores2 = bookStoreRepository.findAll(\n    BookStoreFetcher.$\n        .allScalarFields()\n        .books( \u2776\n            BookFetcher.$\n                .allScalarFields()\n                .authors( \u2777\n                        AuthorFetcher.$\n                                .allScalarFields()\n                )\n        )\n);\nSystem.out.println(stores2);\n'))),(0,o.kt)(i.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'// \u9996\u6b21\u6267\u884c\u65f6\u7f13\u5b58\u65e0\u6570\u636e\uff0c\u901a\u8fc7SQL\u83b7\u53d6\u6240\u6709\u6570\u636e\nval stores = bookStoreRepository.findAll(\n    newFetcher(BookStore::class).by {\n        allScalarFields()\n        books { \u2776\n            allScalarFields()\n            authors { \u2777\n                allScalarFields()\n            }\n        }\n    }\n)\nprintln(stores)\n\nprintln("----------------")\n\n// \u518d\u6b21\u6267\u884c\u65f6\u7f13\u5b58\u6709\u6570\u636e\uff0c\u9664\u805a\u5408\u6839\u5bf9\u8c61\u5916\u7684\u5176\u4ed6\u4fe1\u606f\u65e0\u9700\u901a\u8fc7SQL\u83b7\u53d6\nval stores2 = bookStoreRepository.findAll(\n    newFetcher(BookStore::class).by {\n        allScalarFields()\n        books { \u2776\n            allScalarFields()\n            authors { \u2777\n                allScalarFields()\n            }\n        }\n    }\n)\nprintln(stores2)\n')))),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u4f7f\u7528\u5173\u8054\u7f13\u5b58",(0,o.kt)("inlineCode",{parentName:"li"},"BookStore.books-*"),"\u548c\u5bf9\u8c61\u7f13\u5b58",(0,o.kt)("inlineCode",{parentName:"li"},"Book-*")),(0,o.kt)("li",{parentName:"ol"},"\u4f7f\u7528\u5173\u8054\u7f13\u5b58",(0,o.kt)("inlineCode",{parentName:"li"},"Book.authors-*"),"\u548c\u5bf9\u8c61\u7f13\u5b58",(0,o.kt)("inlineCode",{parentName:"li"},"Author-*"))),(0,o.kt)("h3",{id:"\u6709\u7f13\u5b58\u6a21\u5f0f\u7684sql"},"\u6709\u7f13\u5b58\u6a21\u5f0f\u7684SQL"),(0,o.kt)("p",null,"\u8fd9\u6bb5\u4ee3\u7801\u4e2d\uff0c\u4e00\u6a21\u4e00\u6837\u7684\u67e5\u8be2\u88ab\u6267\u884c\u4e86\u4e24\u6b21\u3002"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"\u7b2c\u4e00\u6b21\u6267\u884c\u65f6\uff0c\u7f13\u5b58\u65e0\u6570\u636e\uff0c\u901a\u8fc7SQL\u67e5\u8be2\u6240\u6709\u6570\u636e\u3002"),(0,o.kt)("p",{parentName:"li"},"\u751f\u6210\u7684SQL\u5982\u4e0b\uff1a"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"/* \n * \u7b2c\u4e00\u6b65\uff1a\u67e5\u8be2\u805a\u5408\u6839\n * \u5f97\u5230\u4e24\u4e2astore, id\u5206\u522b\u4e3a1\u548c2\n */\nselect \n    tb_1_.ID, tb_1_.NAME, tb_1_.WEBSITE \nfrom BOOK_STORE as tb_1_\n\n/*\n * \u7b2c\u4e8c\u6b65\uff1a\n * \n * \u67e5\u770b\u5173\u8054\u7f13\u5b58`BookStore.books-1`\u548c`BookStore.books-2`\uff0c\n * \u7686\u4e0d\u5b58\u5728\uff0c\u53ea\u80fd\u901a\u8fc7SQL\u67e5\u8be2\u5b83\u4eec\uff0c\u5e76\u628a\u7ed3\u679c\u5b58\u5165\u7f13\u5b58\n *\n * \u5199\u5165\u7f13\u5b58\u7684\u6570\u636e:\n * BookStore.books-1: [1, 2, 3, 4, 5, 6, 7, 8, 9]\n * BookStore.books-2: [10, 11, 12]\n */\nselect \n    tb_1_.STORE_ID, tb_1_.ID \nfrom BOOK as tb_1_ \nwhere \n    tb_1_.STORE_ID in (\n        ?, ? /* \u5b9e\u9645\u53c2\u6570\u5217\u8868\uff1a1, 2 */\n    ) \norder by \n    tb_1_.NAME asc, tb_1_.EDITION desc\n\n/*\n * \u7b2c\u4e09\u6b65\uff1a\n *\n * \u67e5\u770b\u5bf9\u8c61\u7f13\u5b58`Book-1`, `Book-2`, ... , 'Book-12'\uff0c\n * \u7686\u4e0d\u5b58\u5728\uff0c\u53ea\u80fd\u901a\u8fc7SQL\u67e5\u8be2\u5b83\u4eec\uff0c\u5e76\u628a\u7ed3\u679c\u5b58\u5165\u7f13\u5b58\n */\nselect \n    tb_1_.ID, tb_1_.NAME, tb_1_.EDITION, tb_1_.PRICE, tb_1_.STORE_ID \nfrom BOOK as tb_1_ where tb_1_.ID in (\n    /* \u5b9e\u9645\u53c2\u6570\u5217\u8868\uff1a6, 5, 4, 3, 2, 1, 9, 8, 7, 12, 11, 10 */\n    ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? \n)\n\n/*\n * \u7b2c\u56db\u6b65\uff1a\n * \n * \u67e5\u770b\u5173\u8054\u7f13\u5b58`Book.authors-1`, `Book.authors-2`, ..., `Book.athors-12`\uff0c\n * \u7686\u4e0d\u5b58\u5728\uff0c\u53ea\u80fd\u901a\u8fc7SQL\u67e5\u8be2\u5b83\u4eec\uff0c\u5e76\u628a\u7ed3\u679c\u5b58\u5165\u7f13\u5b58\n *\n * \u5199\u5165\u7f13\u5b58\u7684\u6570\u636e:\n * Book.authors-1: [1, 2]\n * Book.authors-2: [1, 2]\n * Book.authors-3: [1, 2]\n * Book.authors-4: [3]\n * Book.authors-5: [3]\n * Book.authors-6: [3]\n * Book.authors-7: [4]\n * Book.authors-8: [4]\n * Book.authors-9: [4]\n * Book.authors-10: [5]\n * Book.authors-11: [5]\n * Book.authors-12: [5]\n */ \nselect \n    tb_1_.BOOK_ID, tb_1_.AUTHOR_ID \nfrom BOOK_AUTHOR_MAPPING as tb_1_ \nwhere tb_1_.BOOK_ID in (\n    /* \u5b9e\u9645\u53c2\u6570\u5217\u8868\uff1a1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12 */\n    ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?\n)\n\n/*\n * \u7b2c\u4e94\u6b65\uff1a\n *\n * \u67e5\u770b\u5bf9\u8c61\u7f13\u5b58`Author-1`, `Author-2`, ... , 'Author-5'\uff0c\n * \u7686\u4e0d\u5b58\u5728\uff0c\u53ea\u80fd\u901a\u8fc7SQL\u67e5\u8be2\u5b83\u4eec\uff0c\u5e76\u628a\u7ed3\u679c\u5b58\u5165\u7f13\u5b58\n */\nselect \n    tb_1_.ID, tb_1_.FIRST_NAME, tb_1_.LAST_NAME, tb_1_.GENDER \nfrom AUTHOR as tb_1_ \nwhere tb_1_.ID in (\n    /* \u5b9e\u9645\u53c2\u6570\u5217\u8868\uff1a1, 2, 3, 4, 5 */\n    ?, ?, ?, ?, ? \n)\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"\u7b2c\u4e8c\u6b21\u6267\u884c\u65f6\uff0c\u7f13\u5b58\u6709\u6570\u636e\uff0c\u4ec5\u4ec5\u805a\u5408\u6839\u5bf9\u8c61\u9700\u8981\u901a\u8fc7SQL\u67e5\u8be2"),(0,o.kt)("p",{parentName:"li"},"\u751f\u6210\u7684SQL\u5982\u4e0b\uff1a"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"/* \n * \u7b2c\u4e00\u6b65\uff1a\u67e5\u8be2\u805a\u5408\u6839\n * \u5f97\u5230\u4e24\u4e2astore, id\u5206\u522b\u4e3a1\u548c2\n */\nselect tb_1_.ID, tb_1_.NAME, tb_1_.WEBSITE \nfrom BOOK_STORE as tb_1_\n\n/*\n * \u540e\u7eed\u6240\u6709\u6570\u636e\uff0c\u90fd\u53ef\u4ee5\u901a\u8fc7\n * - \u5173\u8054\u7f13\u5b58`BookStore.books-1`\u548c`BookStore.books-2`\n * - \u5bf9\u8c61`Book-1`\uff0c`Book-2`\u548c``Book-12`\n * - \u5173\u8054\u7f13\u5b58`Book.authors-1`, `Book.authors-2`, ... , `BookStore.authors-12`\n * - \u5bf9\u8c61\u7f13\u5b58`Author-1`, `Author-2`, ... , 'Author-5'\n * \u76f4\u63a5\u5f97\u5230\uff0c\u6240\u4ee5\u65e0\u540e\u7eedSQL\u8bed\u53e5\n */\n")))),(0,o.kt)("h3",{id:"\u5bf9\u6bd4\u65e0\u7f13\u5b58\u6a21\u5f0f\u7684sql"},"\u5bf9\u6bd4\u65e0\u7f13\u5b58\u6a21\u5f0f\u7684SQL"),(0,o.kt)("p",null,"\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u67e5\u8be2\u88ab\u9996\u6b21\u6267\u884c\u65f6\uff0c\u7531\u4e8e\u7f13\u5b58\u4e2d\u6ca1\u6709\u4efb\u4f55\u6570\u636e\u3002\u81ea\u7136\u5730\uff0c\u6240\u6709\u6570\u636e\u5fc5\u987b\u901a\u8fc7SQL\u83b7\u53d6\u3002"),(0,o.kt)("p",null,"\u4f46\u662f\uff0c\u548c\u65e0\u7f13\u5b58\u6a21\u5f0f\u76f8\u6bd4\uff0c\u9996\u6b21\u6267\u884c\u65f6\u751f\u6210\u7684SQL\u5e76\u4e0d\u76f8\u540c\u3002"),(0,o.kt)("p",null,"\u8bf7\u518d\u6b21\u67e5\u770b",(0,o.kt)("a",{parentName:"p",href:"../initial-contact#%E6%9F%A5%E8%AF%A2%E5%A4%8D%E6%9D%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"},"\u521d\u8bc6\u67e5\u8be2/\u67e5\u8be2\u590d\u6742\u6570\u636e\u7ed3\u6784"),"\u4e2d\u7684SQL\u3002"),(0,o.kt)("p",null,"\u901a\u8fc7\u5bf9\u6bd4\uff0c\u4e0d\u96be\u53d1\u73b0\uff0c\u867d\u7136\u4e24\u4e2a\u4f8b\u5b50\u7684\u67e5\u8be2\u65f6\u76f8\u540c\u7684\uff0c\u4f46\u662f"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u672c\u6587\u6863\u4e2d\uff0c\u9996\u6b21\u6267\u884c\u7f13\u5b58\u65e0\u4efb\u4f55\u6570\u636e\u65f6\uff0c\u6267\u884c\u4e865\u6761SQL"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"../initial-contact#%E6%9F%A5%E8%AF%A2%E5%A4%8D%E6%9D%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"},"\u521d\u8bc6\u67e5\u8be2/\u67e5\u8be2\u590d\u6742\u6570\u636e\u7ed3\u6784"),"\u4e00\u8282\u4e2d\uff0c\u6267\u884c\u4e863\u6761SQL\u3002")),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"\u5373\u4fbf\u9762\u5bf9\u6ca1\u6709\u4efb\u4f55\u7f13\u5b58\u6570\u636e\u88ab\u547d\u4e2d\u8fd9\u79cd\u6781\u7aef\u60c5\u51b5\uff0c\u662f\u5426\u542f\u7528\u7f13\u5b58\uff0c\u4ecd\u7136\u4f1a\u5bfc\u81f4\u5bf9\u8c61\u6293\u53d6\u5668\u751f\u6210\u7686\u7136\u4e0d\u540c\u7684SQL\u3002"),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"\u65e0\u7f13\u5b58\u6a21\u5f0f\uff1a\u5c3d\u53ef\u80fd\u751f\u6210\u5c11\u7684SQL\uff0c\u6bcf\u6761SQL\u6240\u6267\u884c\u7684\u4efb\u52a1\u5c3d\u53ef\u80fd\u591a\uff0c\u8fd9\u6837\u7684SQL\u62e5\u6709\u6700\u597d\u7684\u6027\u80fd\u3002")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"\u6709\u7f13\u5b58\u6a21\u5f0f\uff1a\u5e76\u4e0d\u529b\u6c42\u751f\u6210\u7684SQL\u6570\u91cf\u7684\u6700\u5c0f\u5316\uff0c\u4eceSQL\u5c42\u9762\u5206\u6790\uff0c\u6027\u80fd\u4e0d\u662f\u6700\u4f73\u7684\uff0c\u4f46\u662f\u548c\u7f13\u5b58\u7cfb\u7edf\u7ed3\u5408\u540e\uff0c\u7efc\u5408\u6027\u80fd\u6700\u4f73\u3002"))),(0,o.kt)("p",{parentName:"admonition"},"\u7136\u800c\uff0c\u8fd9\u4e00\u5207\u5bf9\u5f00\u53d1\u4eba\u5458\u5b8c\u5168\u900f\u660e\u3002")),(0,o.kt)("h2",{id:"\u5173\u8054\u7f13\u5b58\u4e00\u81f4\u6027"},"\u5173\u8054\u7f13\u5b58\u4e00\u81f4\u6027"),(0,o.kt)("p",null,"Jimmer\u81ea\u52a8\u4fdd\u8bc1\u5173\u8054\u7f13\u5b58\u7684\u4e00\u81f4\u6027\u3002"),(0,o.kt)("p",null,"\u7136\u800c\uff0c\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u672c\u6559\u7a0b\u4ec5\u63a2\u8ba8\u4e86\u67e5\u8be2\uff0c\u6682\u65f6\u6ca1\u6709\u6d89\u53ca\u4fee\u6539\uff0c\u6240\u4ee5\u672c\u6587\u6682\u65f6\u65e0\u6cd5\u8bb2\u89e3\u5982\u4f55\u542f\u7528\u7f13\u5b58\u4e00\u81f4\u6027\u3002\u8bf7\u53c2\u89c1",(0,o.kt)("strong",{parentName:"p"},"TODO"),"\u3002"))}b.isMDXComponent=!0},50684:function(e,n,t){n.Z=t.p+"assets/images/association-cache-a56183bba7a369821e88cbfb277c9464.png"}}]);