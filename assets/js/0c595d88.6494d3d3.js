"use strict";(self.webpackChunkdocusaurus_code=self.webpackChunkdocusaurus_code||[]).push([[6838],{2360:function(e,t,a){a.d(t,{L:function(){return g}});var n=a(7294),o=a(3012),r=a(7906),i=a(295),l=a(3252),s=a(3184),m=a(3816),p=a(5488),d=a(5162),c=a(3457),u=a(480),k=a(5071),h=a(1519),g=function(e){var t=e.type,a=e.locale,o=(0,n.useState)("OPS"!==t),r=o[0],i=o[1],l=(0,n.useCallback)((function(e,t){i(t)}),[]);return n.createElement(p.Z,null,n.createElement(d.Z,{value:"chart",label:"zh"===a?"\u56fe\u8868":"Chart",default:!0},"OPS"===t&&n.createElement(n.Fragment,null,n.createElement(c.Z,null,n.createElement(u.Z,{control:n.createElement(k.Z,{value:r,onChange:l}),label:"zh"===a?"\u663e\u793a\u539f\u751fJDBC\u6307\u6807":"Show native JDBC metrics"})),n.createElement(h.Z,null)),"OPS"==t?n.createElement(N,{rows:w,scale:y,showJdbc:r}):n.createElement(N,{rows:T,scale:f,showJdbc:r})),n.createElement(d.Z,{value:"data",label:"zh"===a?"\u6570\u636e":"Data"},"OPS"===t?n.createElement(b,{rows:w,valueTitle:"Ops/s"}):n.createElement(b,{rows:T,valueTitle:"Time(\u03bcs)"})))},N=function(e){var t=e.rows,a=e.scale,r=e.showJdbc;return n.createElement(o.Chart,{filter:r?void 0:{framework:function(e){return!e.startsWith("JDBC")}},height:400,padding:"auto",data:t,scale:a,autoFit:!0},n.createElement(o.Interval,{adjust:[{type:"dodge",marginRatio:0}],color:"framework",position:"dataCount*value"}),n.createElement(o.Axis,{name:"value",title:!0}),n.createElement(o.Legend,{position:"left"}),n.createElement(o.Tooltip,{shared:!0}),n.createElement(o.Interaction,{type:"active-region"}))},b=function(e){var t=e.rows,a=e.valueTitle;return n.createElement(r.Z,null,n.createElement(s.Z,null,n.createElement(m.Z,null,n.createElement(l.Z,null,"Framework"),n.createElement(l.Z,null,"Data count"),n.createElement(l.Z,null,a))),n.createElement(i.Z,null,t.map((function(e){return n.createElement(m.Z,{key:e.framework+"-"+e.dataCount},n.createElement(l.Z,null,e.framework),n.createElement(l.Z,null,e.dataCount),n.createElement(l.Z,null,e.value))}))))},y={dataCount:{alias:"Data count"},value:{alias:"Ops/s"}},f={dataCount:{alias:"Data count"},value:{alias:"Time(\u03bcs)"}},v=[{framework:"JDBC(ColIndex)",dataCount:"10",value:564001.2567729354},{framework:"JDBC(ColIndex)",dataCount:"20",value:480692.0049806773},{framework:"JDBC(ColIndex)",dataCount:"50",value:232400.81448051397},{framework:"JDBC(ColIndex)",dataCount:"100",value:134662.65691855497},{framework:"JDBC(ColIndex)",dataCount:"200",value:71072.13756007861},{framework:"JDBC(ColIndex)",dataCount:"500",value:30750.505197085316},{framework:"JDBC(ColIndex)",dataCount:"1000",value:14681.13949962451},{framework:"JDBC(ColName)",dataCount:"10",value:340040.8951522477},{framework:"JDBC(ColName)",dataCount:"20",value:194773.9145513743},{framework:"JDBC(ColName)",dataCount:"50",value:125966.97513243598},{framework:"JDBC(ColName)",dataCount:"100",value:55367.65334694574},{framework:"JDBC(ColName)",dataCount:"200",value:38822.98374903588},{framework:"JDBC(ColName)",dataCount:"500",value:16254.22473511859},{framework:"JDBC(ColName)",dataCount:"1000",value:8157.27625556836},{framework:"Jimmer(Java)",dataCount:"10",value:234768.53510339226},{framework:"Jimmer(Java)",dataCount:"20",value:135347.1018453932},{framework:"Jimmer(Java)",dataCount:"50",value:70747.2920672707},{framework:"Jimmer(Java)",dataCount:"100",value:35901.15112642172},{framework:"Jimmer(Java)",dataCount:"200",value:18584.529478668042},{framework:"Jimmer(Java)",dataCount:"500",value:7660.571335425491},{framework:"Jimmer(Java)",dataCount:"1000",value:3758.5644619620043},{framework:"Jimmer(Kotlin)",dataCount:"10",value:231853.04285935243},{framework:"Jimmer(Kotlin)",dataCount:"20",value:133593.8293837718},{framework:"Jimmer(Kotlin)",dataCount:"50",value:61120.85011656247},{framework:"Jimmer(Kotlin)",dataCount:"100",value:27804.709414444893},{framework:"Jimmer(Kotlin)",dataCount:"200",value:16830.479649806184},{framework:"Jimmer(Kotlin)",dataCount:"500",value:6919.78158024675},{framework:"Jimmer(Kotlin)",dataCount:"1000",value:3485.590552457007},{framework:"MyBatis",dataCount:"10",value:77973.45980995704},{framework:"MyBatis",dataCount:"20",value:43832.823890403015},{framework:"MyBatis",dataCount:"50",value:20452.94226988173},{framework:"MyBatis",dataCount:"100",value:10489.448602735492},{framework:"MyBatis",dataCount:"200",value:5146.512081854517},{framework:"MyBatis",dataCount:"500",value:1921.8943211405174},{framework:"MyBatis",dataCount:"1000",value:1059.434126831536},{framework:"Exposed",dataCount:"10",value:96616.78513212189},{framework:"Exposed",dataCount:"20",value:69563.16749094054},{framework:"Exposed",dataCount:"50",value:34146.01603428918},{framework:"Exposed",dataCount:"100",value:19736.116951748565},{framework:"Exposed",dataCount:"200",value:10248.907897197449},{framework:"Exposed",dataCount:"500",value:4261.024374795272},{framework:"Exposed",dataCount:"1000",value:2182.4893364493373},{framework:"JPA(Hibernate)",dataCount:"10",value:103156.13364887898},{framework:"JPA(Hibernate)",dataCount:"20",value:60657.86283377519},{framework:"JPA(Hibernate)",dataCount:"50",value:26729.97622160438},{framework:"JPA(Hibernate)",dataCount:"100",value:13504.199265684878},{framework:"JPA(Hibernate)",dataCount:"200",value:6850.270944007042},{framework:"JPA(Hibernate)",dataCount:"500",value:2540.475589159096},{framework:"JPA(Hibernate)",dataCount:"1000",value:1436.778709930832},{framework:"JPA(EclipseLink)",dataCount:"10",value:63771.749254104725},{framework:"JPA(EclipseLink)",dataCount:"20",value:33636.783791773945},{framework:"JPA(EclipseLink)",dataCount:"50",value:13524.821332500553},{framework:"JPA(EclipseLink)",dataCount:"100",value:6815.290869847297},{framework:"JPA(EclipseLink)",dataCount:"200",value:3232.206328003842},{framework:"JPA(EclipseLink)",dataCount:"500",value:1361.0075376064835},{framework:"JPA(EclipseLink)",dataCount:"1000",value:666.3806417880297},{framework:"JOOQ",dataCount:"10",value:57409.591343825436},{framework:"JOOQ",dataCount:"20",value:35125.83069317591},{framework:"JOOQ",dataCount:"50",value:14441.417555740112},{framework:"JOOQ",dataCount:"100",value:9954.880100551949},{framework:"JOOQ",dataCount:"200",value:3738.1415218764314},{framework:"JOOQ",dataCount:"500",value:1689.4977546444927},{framework:"JOOQ",dataCount:"1000",value:994.240300985835},{framework:"Nutz",dataCount:"10",value:82880.5218855578},{framework:"Nutz",dataCount:"20",value:48007.869458932815},{framework:"Nutz",dataCount:"50",value:17310.36987144335},{framework:"Nutz",dataCount:"100",value:8570.213250226707},{framework:"Nutz",dataCount:"200",value:5123.799062062122},{framework:"Nutz",dataCount:"500",value:1891.545739299192},{framework:"Nutz",dataCount:"1000",value:963.5871325666997},{framework:"ObjectiveSQL",dataCount:"10",value:59701.04409818739},{framework:"ObjectiveSQL",dataCount:"20",value:29487.308838276065},{framework:"ObjectiveSQL",dataCount:"50",value:12662.44231891958},{framework:"ObjectiveSQL",dataCount:"100",value:6795.016060183564},{framework:"ObjectiveSQL",dataCount:"200",value:3419.3520576008223},{framework:"ObjectiveSQL",dataCount:"500",value:1355.7026828586477},{framework:"ObjectiveSQL",dataCount:"1000",value:598.5931780214165},{framework:"Spring Data JDBC",dataCount:"10",value:20612.491148409532},{framework:"Spring Data JDBC",dataCount:"20",value:10123.095370535204},{framework:"Spring Data JDBC",dataCount:"50",value:4029.2231032104232},{framework:"Spring Data JDBC",dataCount:"100",value:1984.4450348794267},{framework:"Spring Data JDBC",dataCount:"200",value:1078.6076478516723},{framework:"Spring Data JDBC",dataCount:"500",value:411.6478839875141},{framework:"Spring Data JDBC",dataCount:"1000",value:226.5922089775573},{framework:"Ktorm",dataCount:"10",value:17717.284985056343},{framework:"Ktorm",dataCount:"20",value:10213.518906877975},{framework:"Ktorm",dataCount:"50",value:4181.627630394707},{framework:"Ktorm",dataCount:"100",value:2040.6740629521064},{framework:"Ktorm",dataCount:"200",value:1067.170484739404},{framework:"Ktorm",dataCount:"500",value:356.0009982293281},{framework:"Ktorm",dataCount:"1000",value:180.52960713759404}],w=v.map((function(e){return Object.assign({},e,{value:Math.round(e.value)})})),T=v.map((function(e){return Object.assign({},e,{value:Math.round(1e6/e.value)})}))},1409:function(e,t,a){a.r(t),a.d(t,{assets:function(){return D},contentTitle:function(){return L},default:function(){return M},frontMatter:function(){return I},metadata:function(){return S},toc:function(){return E}});var n=a(3117),o=a(102),r=a(7294),i=a(3905),l=a(2280),s=a(8895),m=a(2797),p=a(3508),d=0,c=(0,r.memo)((function(e){var t=e.title,a=e.children;return r.createElement(l.Z,{id:"acccordion-"+ ++d},r.createElement(s.Z,{expandIcon:r.createElement(p.Z,null)},r.createElement("h4",null,t)),r.createElement(m.Z,null,a))})),u=a(3321),k=a(3187),h=a(2293),g=a(155),N=a(8862),b=a(9581),y=a(4776),f=(0,r.memo)((function(e){var t=e.buttonText,a=e.fullScreen,n=void 0!==a&&a,o=e.title,i=void 0===o?t:o,l=e.children,s=(0,r.useState)(!1),m=s[0],p=s[1],d=(0,r.useState)(n),c=d[0],y=d[1],f=(0,r.useCallback)((function(){p(!0)}),[]),w=(0,r.useCallback)((function(){p(!1)}),[]),T=(0,r.useCallback)((function(){y((function(e){return!e}))}),[]);return r.createElement(r.Fragment,null,r.createElement(u.Z,{onClick:f,variant:"contained"},t),r.createElement(k.Z,{open:m,onClose:w,fullScreen:c,TransitionComponent:v,maxWidth:"md"},r.createElement(h.Z,{sx:{position:"relative"}},r.createElement(g.Z,null,r.createElement(N.Z,{sx:{ml:2,flex:1},variant:"h6",component:"div"},i),r.createElement(u.Z,{autoFocus:!0,color:"inherit",onClick:T},c?"Recover":"Maximize"),r.createElement(u.Z,{autoFocus:!0,color:"inherit",onClick:w},"Close"))),r.createElement(b.Z,null,l)))})),v=r.forwardRef((function(e,t){return r.createElement(y.Z,(0,n.Z)({direction:"up",ref:t},e))})),w=a(5488),T=a(5162),C=a(8614),x=a(7714),j=a(2360),J=["components"],I={sidebar_position:1,title:"Introduction(Half translated)"},L=void 0,S={unversionedId:"before",id:"before",title:"Introduction(Half translated)",description:"A revolutionary ORM based on Java or Kotlin, but not only ORM.",source:"@site/docs/before.mdx",sourceDirName:".",slug:"/before",permalink:"/jimmer/docs/before",draft:!1,editUrl:"https://github.com/babyfish-ct/jimmer/tree/main/doc/docs/before.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Introduction(Half translated)"},sidebar:"tutorialSidebar",next:{title:"Revolutionary",permalink:"/jimmer/docs/preface"}},D={},E=[{value:"Mind map",id:"mind-map",level:2},{value:"Solution analogy",id:"solution-analogy",level:2},{value:"Features",id:"features",level:2},{value:"1. Flexibility of dynamic objects + Security of static language",id:"1-flexibility-of-dynamic-objects--security-of-static-language",level:3},{value:"2. Not limited to ORM: calculated properties and remote associations",id:"2-not-limited-to-orm-calculated-properties-and-remote-associations",level:3},{value:"3. Cache, cache consistency and trigger",id:"3-cache-cache-consistency-and-trigger",level:3},{value:"4. SQL DSL\uff0cImplicit table joins",id:"4-sql-dslimplicit-table-joins",level:3},{value:"5. \u89e3\u51b3DTO\u7206\u70b8 + TypeScript\u4ee3\u7801\u751f\u6210",id:"5-\u89e3\u51b3dto\u7206\u70b8--typescript\u4ee3\u7801\u751f\u6210",level:3},{value:"6. \u62e6\u622a\u5668",id:"6-\u62e6\u622a\u5668",level:3},{value:"7. \u6781\u81f4\u6027\u80fd",id:"7-\u6781\u81f4\u6027\u80fd",level:3},{value:"8. \u4e0d\u53ef\u53d8\u5bf9\u8c61 + \u6781\u7b80\u8bbe\u8ba1",id:"8-\u4e0d\u53ef\u53d8\u5bf9\u8c61--\u6781\u7b80\u8bbe\u8ba1",level:3}],O={toc:E};function M(e){var t=e.components,r=(0,o.Z)(e,J);return(0,i.kt)("wrapper",(0,n.Z)({},O,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"A revolutionary ORM based on Java or Kotlin, but not only ORM."),(0,i.kt)("h2",{id:"mind-map"},"Mind map"),(0,i.kt)(f,{buttonText:"Too small? View Bigger one",title:"Mind map",fullScreen:!0,mdxType:"ViewMore"},(0,i.kt)("p",null,(0,i.kt)("img",{alt:"jimmer-mind",src:a(8209).Z,width:"1825",height:"2048"}))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"jimmer-mind",src:a(8209).Z,width:"1825",height:"2048"})),(0,i.kt)("h2",{id:"solution-analogy"},"Solution analogy"),(0,i.kt)("p",null,"Jimmer is a comprehensive solution with many powerful features. Some of these features are unique to Jimmer, while others have similarities with certain other technology systems, and can be better understood by users with relevant experience through analogy."),(0,i.kt)("p",null,"The features that can be analogized with other similar technology systems are:"),(0,i.kt)("table",null,(0,i.kt)("thead",null,(0,i.kt)("tr",null,(0,i.kt)("th",null,"Jimmer Feature Point"),(0,i.kt)("th",null,"Similar Solutions"),(0,i.kt)("th",null,"Necessary Explanation"))),(0,i.kt)("tbody",null,(0,i.kt)("tr",null,(0,i.kt)("td",null,"Query arbitrary complex data structures"),(0,i.kt)("td",null,(0,i.kt)("a",{href:"https://graphql.org/)"},"GraphQL")),(0,i.kt)("td",null,(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Unlike GraphQL, which serves as a protocol for HTTP interface exposure, Jimmer extends this capability to APIs of an ORM, which can be called locally everywhere. ",(0,i.kt)("em",{parentName:"p"},"(Of course, you can also choose to use Jimmer's ability to quickly expose GraphQL)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Jimmer can perform recursive queries on self associated properties"))))),(0,i.kt)("tr",null,(0,i.kt)("td",null,"Entity object calculated properties"),(0,i.kt)("td",null,(0,i.kt)("a",{href:"https://github.com/graphql/dataloader"},"DataLoader")),(0,i.kt)("td",null,(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Calculated properties do not have the ",(0,i.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem-in-orm-object-relational-mapping"},"N + 1")," problem")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Calculation logic is decoupled from ORM, and business information (such as identity permissions) can be used for calculation, allowing the use of non-SQL technology"))))),(0,i.kt)("tr",null,(0,i.kt)("td",null,"Entity object remote associations"),(0,i.kt)("td",null,(0,i.kt)("a",{href:"https://www.apollographql.com/docs/federation/"},"Apollo Federation")),(0,i.kt)("td",null,(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Aassociation across microservices, where the entities on both ends of the association belong to different microservices (that also means they belong to different databases).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"If the shape of the data structure being queried includes remote associations, cross-service data access will be automatically completed using HTTP request, which is transparent to developers.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Combine the relational models of different microservices into a global relational model."))))),(0,i.kt)("tr",null,(0,i.kt)("td",null,"Intra-transaction trigger"),(0,i.kt)("td",null,(0,i.kt)("a",{href:"https://seata.io/en-us/docs/dev/mode/at-mode.html"},"Seata's AT mode")),(0,i.kt)("td",null,(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Similarities: Inject additional query SQL when modifying the database to capture database changes")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The difference: Unlike seata which will perform more operations, jimmer intra-transaction triggers only send events to notify users; in addition, there is no need to proxy JDBC connection pool like ",(0,i.kt)("a",{parentName:"p",href:"https://seata.io/en-us/docs/dev/mode/at-mode.html"},"Seata's AT mode"),"."))),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"If conditions permit, binlog triggers should be used in preference to Intra-transaction triggers")))),(0,i.kt)("tr",null,(0,i.kt)("td",null,"Immutable objects"),(0,i.kt)("td",null,(0,i.kt)("a",{href:"https://github.com/immerjs/immer"},"immer")),(0,i.kt)("td",null,(0,i.kt)("p",null,"Unlike traditional ORM, all entity objects in Jimmer are immutable objects."),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"This is very important. If mutable objects are used as entity objects, it actually condones developers to arbitrarily construct ",(0,i.kt)("inlineCode",{parentName:"p"},"circular references"),", which will be a problem with endless consequences. ")),(0,i.kt)("p",null,"Unfortunately, the Java record and ",(0,i.kt)("inlineCode",{parentName:"p"},"copy()")," function of Kotlin data class is designed for simple immutable objects, and it is difficult to handle complex deep immutable object copying and construction in a concise manner, and deep and complex data structures are exactly what the ORM framework has to face."),(0,i.kt)("p",null,"Therefore, Jimmer has ported ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/immerjs/immer"},"immer")," for Java/Kotlin. This is a powerful immutable object solution. This framework is named Jimmer, paying tribute to ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/immerjs/immer"},"immer"),"."))))),(0,i.kt)("h2",{id:"features"},"Features"),(0,i.kt)("h3",{id:"1-flexibility-of-dynamic-objects--security-of-static-language"},"1. Flexibility of dynamic objects + Security of static language"),(0,i.kt)(c,{title:"Flexibility of dynamic objects",mdxType:"Collapse"},(0,i.kt)("p",null,"In Jimmer, entity objects are not simple Java Beans, but dynamic objects."),(0,i.kt)("p",null,"That is, any property of an entity object can be missing. Not specifying the properties of an object and setting the properties of an object to null are completely different concepts, so the shape of the data structure can vary greatly."),(0,i.kt)(f,{title:"Dynamic objects lead to flexible data structure shapes",buttonText:"View example",mdxType:"ViewMore"},(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Incomplete object"),(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Book book = BookDraft.$.product(book -> {\n    book.setName("Learning GraphQL");\n});\n'))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'val book = new(Book::class).by {\n    name = "Learning GraphQL"\n}\n'))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Complete object"),(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Book book = BookDraft.$.product(book -> {\n    book.setName("Learning GraphQL");\n    book.setEdition(1);\n    book.setPrice(new BigDecimal("49.99"));\n});\n'))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'val book = new(Book::class).by {\n    name = "Learning GraphQL"\n    edition = 1\n    price = BigDecimal("49.99")\n}\n'))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"With association"),(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Book book = BookDraft.$.product(book -> {\n    book.setName("Learning GraphQL");\n    book.setEdition(1);\n    book.setPrice(new BigDecimal("49.99"));\n    book.applyStore(store -> {\n        store.setName("O\'REILLY");\n        store.setWebsite("https://www.oreilly.com/");\n    });\n});\n'))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'val book = new(Book::class).by {\n    name = "Learning GraphQL"\n    edition = 1\n    price = BigDecimal("49.99")\n    store().apply {\n        name = "O\'REILLY"\n        website = "https://www.oreilly.com/"\n    }\n}\n'))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"More associations"),(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Book book = BookDraft.$.product(book -> {\n    book.setName("Learning GraphQL");\n    book.setEdition(1);\n    book.setPrice(new BigDecimal("49.99"));\n    book.applyStore(store -> {\n        store.setName("O\'REILLY");\n        store.setWebsite("https://www.oreilly.com/");\n    });\n    book.addIntoAutors(author -> { \n        author.setFirstName("Eve");\n        author.setLastName("Procello");\n        author.setGender(Gender.FEMALE);\n    });\n    book.addIntoAutors(author -> { \n        author.setFirstName("Alex");\n        author.setLastName("Banks");\n        author.setGender(Gender.MALE);\n    });\n});\n'))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'val book = new(Book::class).by {\n    name = "Learning GraphQL"\n    edition = 1\n    price = BigDecimal("49.99")\n    store().apply {\n        name = "O\'REILLY"\n        website = "https://www.oreilly.com/"\n    }\n    authors().addBy {\n        firstName = "Eve"\n        setLastName = "Procello"\n        gender = Gender.FEMALE\n    }\n    authors().addBy {\n        firstName = "Alex"\n        lastName = "Banks"\n        gender = Gender.MALE\n    }\n}\n'))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Deeper associations"),(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Book book = BookDraft.$.product(book -> {\n    book.setName("Learning GraphQL");\n    book.setEdition(1);\n    book.setPrice(new BigDecimal("49.99"));\n    book.applyStore(store -> {\n        store.setName("O\'REILLY");\n        store.setWebsite("https://www.oreilly.com/");\n        store.applyAddress(address -> {\n            address.setCity("Sevastopol");\n            address.setState("California");\n        });\n    });\n});\n'))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'val book = new(Book::class).by {\n    name = "Learning GraphQL"\n    edition = 1\n    price = BigDecimal("49.99")\n    store().apply {\n        name = "O\'REILLY"\n        website = "https://www.oreilly.com/"\n        address().apply {\n            city = "Sevastopol"\n            state = "California"\n        }\n    }\n}\n'))))))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The versatility of the data structure can bring flexibility that is beyond the reach of static language ORM."),(0,i.kt)("p",{parentName:"li"},"For querying, users can flexibly control the format of the data structure being queried. This level of control can be precise to object properties."),(0,i.kt)("p",{parentName:"li"},"This capability is similar to ",(0,i.kt)("a",{parentName:"p",href:"https://graphql.org/"},"GraphQL"),", the capabilities of ",(0,i.kt)("a",{parentName:"p",href:"https://graphql.org/"},"GraphQL")," HTTP services are extended to ubiquitous local code behavior."),(0,i.kt)(f,{buttonText:"View video",mdxType:"ViewMore"},(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("video",{width:"100%",controls:!0},(0,i.kt)("source",{src:C.Z,type:"video/mp4"}),(0,i.kt)("div",{style:{padding:"1rem",fontSize:"2rem",color:"red"}},"Your browser does not support the video tag."))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("video",{width:"100%",controls:!0},(0,i.kt)("source",{src:x.Z,type:"video/mp4"}),(0,i.kt)("div",{style:{padding:"1rem",fontSize:"2rem",color:"red"}},"Your browser does not support the video tag.")))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"For the save operation, Jimmer is also different from traditional ORM"),(0,i.kt)("p",{parentName:"li"},"Taking JPA/Hibernate as an example, whether the ordinary properties of an object need to be saved is controlled by ",(0,i.kt)("a",{parentName:"p",href:"https://docs.oracle.com/javaee/7/api/javax/persistence/Column.html#insertable--"},"Column.insertable")," and ",(0,i.kt)("a",{parentName:"p",href:"https://docs.oracle.com/javaee/7/api/javax/persistence/Column.html#updatable--"},"Column.updatable"),", and whether the associated properties need to be saved is controlled by ",(0,i.kt)("a",{parentName:"p",href:"https://docs.oracle.com/javaee/7/api/javax/persistence/OneToOne.html#cascade--"},"OneToOne.cascade"),", ",(0,i.kt)("a",{parentName:"p",href:"https://docs.oracle.com/javaee/7/api/javax/persistence/ManyToOne.html#cascade--"},"ManyToOne.cascade"),", ",(0,i.kt)("a",{parentName:"p",href:"https://docs.oracle.com/javaee/7/api/javax/persistence/OneToMany.html#cascade--"},"OneToMany.cascade")," and ",(0,i.kt)("a",{parentName:"p",href:"https://docs.oracle.com/javaee/7/api/javax/persistence/ManyToMany.html#cascade--"},"ManyToMany.cascade"),". However, no matter how developers configure it, the shape of the data structure that JPA/Hibernate can save for you is fixed."),(0,i.kt)("p",{parentName:"li"},"Jimmer uses a completely different method, directly saving dynamic entity object. The set properties will be saved, and the missing properties will be ignored, allowing for data structures of any shape to be saved."),(0,i.kt)("p",{parentName:"li"},"The purpose of doing this is:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Rapidly develop arbitrarily complex form saving business")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Multiple save business logic with different form formats can coexist for the same aggregate root type."))))),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Jimmer's basic operation unit for both output",(0,i.kt)("em",{parentName:"p"},"(query)")," and input",(0,i.kt)("em",{parentName:"p"},"(save)")," is data structures of any shape, rather than simple entity objects.")),(0,i.kt)("p",null,"Let's compare 3 traditional approaches:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Using very simple techniques in the data layer to complete single-table CRUD and writing code to handle associations between different data at the upper business layer. This approach has a large workload, is prone to bugs, is not easy to reuse and optimize, and is the least recommended approache.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Using traditional ORM to process data. Although these ORM frameworks provide some ability to control the shape of data structure, the ability is ultimately limited by the constraints of static java objects, and often fall short in the face of flexible business requirements.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Using MyBatis to meet flexible business requirements. However, MyBatis's flexibility comes at the cost of workload. That is, for each data structure required for each business scenario, a DTO type must be defined and a CURD Mapper is required."))),(0,i.kt)("p",null,"The absolute flexibility of Jimmer can relieve you from the troubles of any of the above approaches.")),(0,i.kt)(c,{title:"Security of static language",mdxType:"Collapse"},(0,i.kt)("p",null,"Earlier, we talked about dynamic objects. Perhaps readers' first thought was dynamic languages, thinking about no spelling checking and no type checking at compile time, no good IDE intelligent prompts, and the fragile maintainability of dynamic languages."),(0,i.kt)("p",null,"On the contrary, Jimmer is a framework that tries its best to make use of the advantages of static languages, has good security, and has excellent high performance."),(0,i.kt)("p",null,"Although Jimmer entities are dynamic, they are still strong-typed Java/Kotlin type, rather than weak-typed map or anything homogenous with the map."),(0,i.kt)(f,{title:"Strongly typed entity",buttonText:"View example",mdxType:"ViewMore"},(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"package com.example.demo;\n\nimport org.babyfish.jimmer.sql.*;\n\n@Entity\npublic interface Book {\n\n    @Id\n    long id();\n\n    String name();\n\n    int edition();\n\n    BigDecimal price();\n\n    @ManyToOne\n    BookStore store();\n\n    @ManyToMany\n    List<Author> authors();\n}\n"))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},"package com.example.demo\n\nimport org.babyfish.jimmer.sql.*\n\n@Entity\ninterface Book {\n\n    @Id\n    val id: Long\n\n    val name: String\n\n    val edition: Int\n\n    val price: BigDecimal\n\n    @ManyToOne\n    val store: BookStore\n\n    @ManyToMany\n    val authors: List<Author>\n}\n"))))),(0,i.kt)("p",null,"In addition to an exception being thrown when accessing missing properties of an object directly,\nthere is no difference between a Jimmer entity and a regular java/kotlin object.\nThis exception is equivalent to the lazy loading exception in traditional ORM\n",(0,i.kt)("em",{parentName:"p"},"(e.g., ",(0,i.kt)("a",{parentName:"em",href:"https://docs.jboss.org/hibernate/orm/6.0/javadocs/org/hibernate/LazyInitializationException.html"},"org.hibernate.LazyInitializationException")," of Hibernate)"),"."),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"In fact, the dynamic nature of Jimmer entity objects is the result of extending the ",(0,i.kt)("inlineCode",{parentName:"p"},"LazyInitializationException")," in the traditional ORM domain to any property of an object.\nSince the cost has already been paid, the dynamic nature should be brought to the extreme and fully enjoy its benefits.")),(0,i.kt)("p",null,"Not only are user-defined entity types strongly typed, but Jimmer's API itself is also fully utilizing the advantages of static languages.\nFor example, its API uses a ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Domain-specific_language"},"DSL")," design instead of an (x)ql-style API that directly accepts strings.\nIt strives to discover problems at compile time rather than at runtime."),(0,i.kt)("p",null,"Even Jimmer provides different APIs for Java and Kotlin, instead of sharing same API, as Kotlin can more conveniently and elegantly\nimplement richer compile-time security capabilities and better IDE prompts than Java."),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"On the one hand, Jimmer fully realizes the absolute flexibility and control brought by dynamic entities, and on the other hand, it strives to make the most of the advantages of static languages. This is the most obvious feature of Jimmer, for which there is no equivalent in either dynamic language ecosystem ORM frameworks or static language ecosystem ORM frameworks."))),(0,i.kt)("h3",{id:"2-not-limited-to-orm-calculated-properties-and-remote-associations"},"2. Not limited to ORM: calculated properties and remote associations"),(0,i.kt)(c,{title:"Calculated properties",mdxType:"Collapse"},(0,i.kt)("p",null,"If a business calculation indicator is strongly related to an entity, developers can choose to define a calculated property for the entity."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Jimmer can finely control the shape of the queried data structure, so calculated properties are only resolved when it is explicitly required.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Unlike formula properties of other ORM technologies, Jimmer's calculation rules are decoupled from ORM so that information that is only available to the business layer\n(such as information from the permission system) can be used for calculation.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Jimmer has a built-in mechanism similar to ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/graphql/dataloader"},"graphql/datloader")," framework, like ordinary ORM properties,\ncalculated properties do not have the ",(0,i.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem-in-orm-object-relational-mapping"},"N + 1")," problem.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Any technology can be used to complete the calculation, not just SQL. For example, OLAP-related technologies can be used.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Calculated property can be either scalar or association."))),(0,i.kt)("p",null,"Because of the last two points, you can even ask Jimmer to query such data structures"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"+------------------+\n|    Entity A      |\n| (Aggregate-root) |\n+--------+---------+\n         |\n    (ORM association)\n         |\n         \u2193\n+------------------+\n|    Entity B      |\n+--------+---------+\n         |\n(Calculated association)\n         |\n         \u2193\n+------------------+\n|    Entity C      |\n+--------+---------+\n         |\n    (ORM association)\n         |\n         \u2193\n+------------------+\n|    Entity D      |\n+--------+---------+\n         |\n(Calculated association)\n         |\n         \u2193\n+------------------+\n|    Entity E      |\n+--------+---------+\n")),(0,i.kt)("p",null,"Here,"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"ORM association")," represents the ordinary associations such as @OneToOne, @ManyToOne, @OneToMany, and @ManyToMany, which are associations determined by database data and automatically executed SQL operations by Jimmer.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"Calculated association")," represents the calculated associations implemented by users, whose behavior is determined by developers and may use non-SQL technologies to implement calculation logic."))),(0,i.kt)("p",null,"Ignoring the cache, in Jimmer, the SQL operations automatically performed and the calculations implemented by developers (which may use non-SQL technologies) will be combined and executed alternately until the entire data structure is queried.")),(0,i.kt)(c,{title:"Remote associations",mdxType:"Collapse"},(0,i.kt)("p",null,"Jimmer is not just an ORM for monolithic applications (or single microservices), it can also handle remote associations across microservice (database) boundaries."),(0,i.kt)("p",null,"You can ask Jimmer to query such data structures."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"+------------------------+\n|     Micro   service: \u03b1 |\n|                        |\n|  +------------------+  |\n|  |    Entity A      |  |\n|  | (Aggregate-root) |  |\n|  +--------+---------+  |\n|           |            | \n|   (Local association)  |\n|           |            |\n|           \u2193            |\n|  +------------------+  |\n|  |    Entity B      |  |\n|  +--------+---------+  |\n|           |            |\n+-----------+------------+\n            |\n    (Remote association)\n            |\n+-----------+------------+\n|     Micro | service: \u03b2 |\n|           \u2193            |\n|  +------------------+  |\n|  |    Entity C      |  |\n|  +--------+---------+  |\n|           |            | \n|   (Local association)  |\n|           |            |\n|           \u2193            |\n|  +------------------+  |\n|  |    Entity D      |  |\n|  +--------+---------+  |\n|           |            |\n+-----------+------------+\n            |\n    (Remote association)\n            |\n+-----------+------------+\n|     Micro | service: \u03b3 |\n|           \u2193            |\n|  +------------------+  |\n|  |    Entity E      |  |\n|  +--------+---------+  |\n|           |            | \n|   (Local association)  |\n|           |            |\n|           \u2193            |\n|  +------------------+  |\n|  |    Entity F      |  |\n|  +--------+---------+  |\n|           |            |\n+-----------+------------+\n")),(0,i.kt)("p",null,"Here"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"Local association")," represents the ORM associations within a microservice (database), and the queries of such associations will be translated into SQL or cache operations.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"Remote association")," represents remote associations between different microservices (databases), and the queries of such associations will be translated into remote data retrieval."))),(0,i.kt)("p",null,"However, all of these are transparent to the user.")),(0,i.kt)("h3",{id:"3-cache-cache-consistency-and-trigger"},"3. Cache, cache consistency and trigger"),(0,i.kt)(c,{title:"Fully transparent cache",mdxType:"Collapse"},(0,i.kt)("p",null,"If a business application only needs to operate the database, most development teams can keep relatively good maintainability of the code."),(0,i.kt)("p",null,"However, once caching technology is introduced to improve performance, business code needs to be significantly adjusted, which reduces maintainability.\nCache consistency is also a headache."),(0,i.kt)("p",null,"To solve this pain point, Jimmer has a powerful built-in caching mechanism, which ensures that\nthe cache is completely transparent to the business code and solves consistency problems."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"From the low-level perspective, Jimmer supports the following three types of caches:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Object cache: maps the ID(s) to a single object(s) without associations"),(0,i.kt)(f,{buttonText:"View picture",title:"Object cache",mdxType:"ViewMore"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{alt:"object-cache",src:a(372).Z,width:"1280",height:"1216"})))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Association cache: maps the ID(s) of current object(s) to the ID(s) of associated object(s),\nwhich is effective for one-to-one, one-to-many, many-to-one, and many-to-many associations"),(0,i.kt)(f,{buttonText:"View picture",title:"Association",mdxType:"ViewMore"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{alt:"association-cache",src:a(684).Z,width:"1473",height:"1399"})))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Calculated cache: maps the ID(s) of current object(s) to the result(s) of calculated property"),(0,i.kt)(f,{buttonText:"View picture",title:"Calculated cache",mdxType:"ViewMore"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{alt:"association-cache",src:a(6385).Z,width:"1473",height:"918"})))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"From the high-level perspective of a high-level, it is cache for data structures of any shape."))),(0,i.kt)("p",null,"Jimmer cache features are as follows:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Jimmer cache is a multi-level cache, the number of levels and  caching technology of each level are determined by the user.\n(If you run the official example in cache mode, it uses two levels of cache. the first level is a JVM memory cache using ",(0,i.kt)("inlineCode",{parentName:"p"},"Caffeine"),", and the second level is a remote memory cache using ",(0,i.kt)("inlineCode",{parentName:"p"},"Redis"),")")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Cache is optional for Jimmer, and you can enable, disable, or partially enable it.\nDevelopers can finely control whether each entity type, or even each entity property, uses caching or not."))),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Regardless of how the cache's partial enablement mode is changed, no changes to the business code are required.\nJimmer caching is completely transparent to the business code."))),(0,i.kt)(c,{title:"Trigger and cache consistency",mdxType:"Collapse"},(0,i.kt)("p",null,"To better achieve cache consistency, Jimmer has implemented triggers that detect any changes in the database\n",(0,i.kt)("em",{parentName:"p"},"(Note: the use of triggers should not be limited to cache consistency)"),"."),(0,i.kt)("p",null,"Jimmer provides two types of triggers:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Binlog trigger:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"This requires the database to support binlogs, and the user can use any technical means to receive binlog changes\nand call Jimmer's API to complete the notification. This means that it is enabled without calling any Jimmer API.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Jimmer will perform ",(0,i.kt)("inlineCode",{parentName:"p"},"binlog -> entity&association")," mapping, not only triggering object change events based on\nordinary data changes, but also triggering association change events based on changes in foreign keys or middle tables.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Binlog trigger can capture database changes caused by external systems, and the trigger occurs after the transaction is committed.\nThe real-time degree depends on the user's technology to accept binlog changes and the network health status.\nUnder normal circumstances, it should be close to real-time.")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Intra-transaction trigger"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"No external environment configuration is required, and it is enabled by calling the Jimmer API.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"All of Jimmer's APIs that modify the database will be affected, and some additional SQL queries will be automatically injected to simulate the effects triggered\n(this approach is extremely similar to ",(0,i.kt)("a",{parentName:"p",href:"https://seata.io/en-us/docs/dev/mode/at-mode.html"},"Seata's AT mode"),", but without proxying the JDBC connection pool).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The intra-transaction trigger can only capture the database changes caused by the current application,\nand the trigger occurs before the transaction is committed.\nNote that intra-transaction trigger cannot bu used to execute time-consuming tasks, which will increase the length of the transaction."))))),(0,i.kt)("p",null,"Although the two triggers have different mechanisms, the data format of the event notification is fully compatible."),(0,i.kt)("p",null,"Once the trigger is enabled, Jimmer's cache consistency can be used."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Object cache: fully automatic consistency, which can be ensured by enabling the trigger, without any additional work required.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Association cache: fully automatic consistency, which can be ensured by enabling the trigger, without any additional work required.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Calculation cache: Developer-assisted consistency, responds to trigger events, judges whether the calculation result will be affected,\nand clears the calculation cache if necessary.")))),(0,i.kt)("h3",{id:"4-sql-dslimplicit-table-joins"},"4. SQL DSL\uff0cImplicit table joins"),(0,i.kt)(c,{title:"SQL DSL",mdxType:"Collapse"},(0,i.kt)("p",null,"\u7528\u4e8e\u64cd\u4f5c\u6570\u636e\u5e93\u7684\u6846\u67b6\u901a\u5e38\u6709\u4e24\u79cd\u98ce\u683c"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u5b57\u7b26\u4e32",(0,i.kt)("inlineCode",{parentName:"p"},"(x)ql"),"\u98ce\u683c\u7684\u8bbe\u8ba1"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u4ee3\u8868\uff1a",(0,i.kt)("a",{parentName:"li",href:"https://hibernate.org/"},"Hiberante"),"\u7684",(0,i.kt)("a",{parentName:"li",href:"https://docs.jboss.org/hibernate/core/3.3/reference/en/html/queryhql.html"},"HQL"),"\uff0c",(0,i.kt)("a",{parentName:"li",href:"https://www.oracle.com/java/technologies/persistence-jsp.html"},"JPA"),"\u7684",(0,i.kt)("a",{parentName:"li",href:"https://docs.oracle.com/html/E13946_04/ejb3_langref.html"},"JPQL"),"\uff0c",(0,i.kt)("a",{parentName:"li",href:"https://mybatis.org/mybatis-3"},"MyBatis"),"\u7684",(0,i.kt)("a",{parentName:"li",href:"https://mybatis.org/mybatis-3/sqlmap-xml.html"},"mapper"),"\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u4f18\u70b9\uff1a\u7b80\u5355\u6613\u61c2"),(0,i.kt)("li",{parentName:"ul"},"\u7f3a\u70b9\uff1a",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u5f31\u7c7b\u578b\uff0c\u4e0d\u80fd\u7f16\u8bd1\u65f6\u63d0\u524d\u53d1\u73b0\u95ee\u9898\uff08IDE\u7279\u6b8a\u652f\u6301\u53ef\u4ee5\u7f13\u89e3\uff09\u53ef\u7ef4\u62a4\u6027\u5dee\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u52a8\u6001\u67e5\u8be2\u9700\u8981\u5f15\u5165\u4e00\u5957\u7279\u5b9a\u7684sql\u62fc\u63a5\u6a21\u677f\u8bed\u6cd5\uff0c\u4e14\u63a7\u5236\u529b\u4e00\u822c\u3002"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Domain-specific_language"},"DSL"),"\u98ce\u683c\u8bbe\u8ba1"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u4ee3\u8868: ",(0,i.kt)("a",{parentName:"li",href:"https://www.jooq.org/"},"JOOQ"),"\uff0c",(0,i.kt)("a",{parentName:"li",href:"https://docs.oracle.com/javaee/6/tutorial/doc/gjitv.html"},"JPA2.0 Criteria"),"\uff0c",(0,i.kt)("a",{parentName:"li",href:"http://querydsl.com/"},"QueryDSL"),"\uff0c",(0,i.kt)("a",{parentName:"li",href:"https://github.com/mybatis-flex/mybatis-flex"},"MyBatis-Flex"),"\uff0c",(0,i.kt)("a",{parentName:"li",href:"https://github.com/atool/fluent-mybatis"},"Fluent-MyBatis"),"\uff0c",(0,i.kt)("a",{parentName:"li",href:"https://github.com/JetBrains/Exposed"},"Exposed(Kotlin)"),"\uff0c",(0,i.kt)("a",{parentName:"li",href:"http://max-l.github.io/Squeryl/introduction.html"},"Squeryl(Scala)"),"\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u4f18\u70b9\uff1a",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u5f3a\u7c7b\u578b\uff0c\u7f16\u8bd1\u65f6\u53d1\u73b0\u95ee\u9898\uff0c\u53ef\u7ef4\u62a4\u6027\u597d\uff0c\u91cd\u6784\u9879\u76ee\u65f6\u5c24\u5176\u6709\u7528\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u6709IDE\u667a\u80fd\u63d0\u793a\u652f\u6301\uff0c\u4ee3\u7801\u4e66\u5199\u6d41\u7545\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u826f\u597d\u7684\u52a8\u6001\u67e5\u8be2\u63a7\u5236\u529b\u53ef\u4ee5\u975e\u5e38\u5f3a ",(0,i.kt)("em",{parentName:"li"},"(\u548c\u5177\u4f53DSL\u8bbe\u8ba1\u76f8\u5173)"),"\u3002"))),(0,i.kt)("li",{parentName:"ul"},"\u7f3a\u70b9\uff1a",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u6709\u8f7b\u5fae\u7684\u5b66\u4e60\u6210\u672c ",(0,i.kt)("em",{parentName:"li"},"(\u548c\u5177\u4f53DSL\u8bbe\u8ba1\u76f8\u5173)"),"\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u5c1a\u672a\u719f\u7ec3\u638c\u63e1SQL\u7684\u65b0\u624b\u4f1a\u9762\u4e34\u56f0\u96be\u3002")))))),(0,i.kt)("p",null,"DSL\u98ce\u683c\u66f4\u7b26\u5408Java/Kotlin\u8fd9\u7c7b\u9759\u6001\u8bed\u8a00\u7684\u8bbe\u8ba1\u7406\u5ff5\uff0c\u56e0\u6b64Jimmer\u9009\u62e9\u4ee5DSL\u4f5c\u4e3a\u6570\u636e\u5e93\u64cd\u4f5cAPI\u3002\u540c\u65f6\uff0c\u5bf9\u4e8e\u7279\u5b9a\u6570\u636e\u5e93\u4ea7\u54c1\u76f8\u5173\u7684\u975e\u901a\u7528\u6027SQL\u8868\u8fbe\u5f0f\uff0c\u5141\u8bb8\u5728\u5f3a\u7c7b\u578bDSL\u4e2d\u63d2\u5165Native SQL\u7247\u6bb5\u3002"),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u53d7\u9650\u4e8eJava\u8bed\u8a00\u672c\u8eab\u7684\u8868\u8fbe\u529b\uff0cJimmer\u4e0b",(0,i.kt)("inlineCode",{parentName:"p"},"Java DSL"),"\u7684\u5f00\u53d1\u4f53\u9a8c\u7565\u900a\u4e8e",(0,i.kt)("inlineCode",{parentName:"p"},"Kotlin DSL"),"\u7684\u5f00\u53d1\u4f53\u9a8c\u3002\u8fd9\u5e94\u8be5\u4f5c\u4e3a\u4f60\u51b3\u5b9a\u81ea\u5df1\u7a76\u7adf\u4ee5java\u8fd8\u662fkotlin\u4f7f\u7528Jimmer\u7684\u8003\u91cf\u70b9\u4e4b\u4e00\u3002"))),(0,i.kt)(c,{title:"\u9690\u5f0f\u8868\u8fde\u63a5",mdxType:"Collapse"},(0,i.kt)("p",null,"\u4e0a\u9762\u6240\u8ba8\u8bba\u7684\u4f9d\u8d56\u4e8e\u9759\u6001\u8bed\u8a00\u5b89\u5168\u6027\u7684\u9ad8\u53ef\u7ef4\u62a4\u6027\uff0c\u662fJimmer\u9009\u62e9\u6210\u4e3aDSL\u98ce\u683c\u6846\u67b6\u7684\u539f\u56e0\uff0c\u4f46\u975e\u552f\u4e00\u7684\u539f\u56e0\u3002"),(0,i.kt)("p",null,"Jimmer DSL\u5f15\u5165\u4e86\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u80fd\u529b\uff0c\u9690\u5f0f\u8868\u8fde\u63a5\u3002"),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u9690\u5f0f\u8868\u8fde\u63a5\u7684\u601d\u60f3\u840c\u82bd\u4e8e",(0,i.kt)("inlineCode",{parentName:"p"},"JPA/Hibernate"),"\uff0cJimmer\u5c06\u5176\u62d3\u5c55\u5230\u4e86\u6781\u81f4\u3002")),(0,i.kt)("p",null,"\u5728jimmer\u4e2d\u6ca1\u6709\u663e\u5f0f\u7684",(0,i.kt)("inlineCode",{parentName:"p"},"join"),"\u64cd\u4f5c\uff0c\u6240\u6709\u8868\u8fde\u63a5\u90fd\u662f\u9690\u5f0f\u7684\u3002"),(0,i.kt)("p",null,"\u51e0\u4e4e\u6240\u6709\u6570\u636e\u5e93\u64cd\u4f5c\u6846\u67b6\u90fd\u4f1a\u652f\u6301\u52a8\u6001",(0,i.kt)("inlineCode",{parentName:"p"},"where"),"\u8868\u8fbe\u5f0f\u5b9e\u73b0\u52a8\u6001\u67e5\u8be2\u3002\u5373\uff0c\u5b50\u6761\u4ef6\u6709\u5f88\u591a\u4e2a\uff0c\u4f46\u672a\u5fc5\u90fd\u4f1a\u751f\u6548\uff0c\u6839\u636eUI\u7684\u8f93\u5165\u60c5\u51b5\u4efb\u610f\u7ec4\u5408\u4f7f\u7528\uff0c\u9002\u7528\u4e8e\u67e5\u8be2\u6761\u4ef6\u591a\u6837\u5316\u7684\u573a\u5408\u3002"),(0,i.kt)("p",null,"\u5047\u5982\u5176\u4e2d\u67d0\u4e9b\u5b50\u6761\u4ef6\u8fc7\u6ee4\u7684\u7684\u5e76\u975e\u5f53\u524d\u8868\uff0c\u800c\u662f\u901a\u8fc7",(0,i.kt)("inlineCode",{parentName:"p"},"join"),"\u64cd\u4f5c\u5173\u8054\u5230\u5176\u4ed6\u8868\u518d\u65bd\u52a0\u8fc7\u6ee4\u6761\u4ef6\u3002"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u5982\u679c\u9884\u5148\u628a\u6240\u6709\u53ef\u80fd\u88ab",(0,i.kt)("inlineCode",{parentName:"li"},"join"),"\u7684\u8868\u5168\u90e8",(0,i.kt)("inlineCode",{parentName:"li"},"join"),"\u4e86\uff0c\u90a3\u4e48\u5f53\u9700\u8981\u8fd9\u4e9b",(0,i.kt)("inlineCode",{parentName:"li"},"join"),"\u7684\u5b50\u6761\u4ef6\u672a\u5168\u90e8\u751f\u6548\u65f6\uff0c\u4ea7\u751f\u6027\u80fd\u6d6a\u8d39\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u5982\u679c\u5f53\u6bcf\u4e2a\u5b50\u6761\u4ef6\u751f\u6548\u7684\u5224\u65ad\u6210\u7acb\u662f\u624d",(0,i.kt)("inlineCode",{parentName:"li"},"join"),"\uff0c\u90a3\u4e48\u5f53\u5bf9\u540c\u4e00\u5f20\u8868",(0,i.kt)("inlineCode",{parentName:"li"},"join"),"\u7684\u591a\u4e2a\u5b50\u6761\u4ef6\u540c\u65f6\u751f\u6548\u65f6\uff0c\u4f1a\u5bfc\u81f4\u540c\u4e00\u5f20\u8868\u88ab",(0,i.kt)("inlineCode",{parentName:"li"},"join"),"\u591a\u6b21\uff0c\u8fd9\u540c\u6837\u662f\u4e00\u79cd\u6027\u80fd\u6d6a\u8d39\u3002")),(0,i.kt)("p",null,"\u5176\u4e2d\uff0c\u67d0\u4e9b\u5b50\u6761\u4ef6\u8fd8\u53ef\u80fd\u9700\u8981",(0,i.kt)("inlineCode",{parentName:"p"},"join"),"\u591a\u5f20\u8868\uff0c\u5373",(0,i.kt)("inlineCode",{parentName:"p"},"join"),"\u94fe\u8def\u53ef\u80fd\u6bd4\u8f83\u957f\uff0c\u8fd9\u7c7b\u95ee\u9898\u4f1a\u66f4\u52a0\u7e41\u7410\u3002"),(0,i.kt)("p",null,"\u65e0\u8bba\u52a8\u6001\u67e5\u8be2\u6709\u591a\u7e41\u7410\uff0c\u4e1a\u52a1\u4ee3\u7801\u90fd\u5e94\u8be5\u6781\u7b80\u7684\u3002\u6240\u4ee5"),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u4ec5\u4ec5\u6709",(0,i.kt)("inlineCode",{parentName:"p"},"\u52a8\u6001where"),"\u548c",(0,i.kt)("inlineCode",{parentName:"p"},"\u52a8\u6001 order by"),"\u662f\u4e0d\u591f\u7684\uff0c\u8fd8\u9700\u8981",(0,i.kt)("inlineCode",{parentName:"p"},"\u52a8\u6001join"),"\u3002")),(0,i.kt)("p",null,"Jimmer\u9690\u5f0f\u8868\u8fde\u63a5\u5c31\u662f\u4e3a",(0,i.kt)("inlineCode",{parentName:"p"},"\u52a8\u6001join"),"\u800c\u8bbe\u8ba1\uff0c\u5b8c\u7f8e\u89e3\u51b3\u4e86\u4e0a\u8ff0\u95ee\u9898\uff0c\u5373\u4fbf\u9762\u5bf9\u8fd9\u79cd\u975e\u5e38\u7e41\u7410\u7684\u52a8\u6001\u67e5\u8be2\u4e5f\u80fd\u4f18\u96c5\u5feb\u6377\u5730\u5b9e\u73b0\u3002\u8fd9\u662f\u5176\u4ed6\u6240\u6709\u65b9\u6848 ",(0,i.kt)("em",{parentName:"p"},"(\u65e0\u8bba\u662f",(0,i.kt)("inlineCode",{parentName:"em"},"(x)ql"),"\u8fd8\u662fDSL\u98ce\u683c)")," \u90fd\u6ca1\u6709\u7684\u529f\u80fd\uff0c\u4e5f\u662fJimmer\u9879\u76ee\u88ab\u521b\u5efa\u7684\u6700\u521d\u52a8\u673a\u3002")),(0,i.kt)("h3",{id:"5-\u89e3\u51b3dto\u7206\u70b8--typescript\u4ee3\u7801\u751f\u6210"},"5. \u89e3\u51b3DTO\u7206\u70b8 + TypeScript\u4ee3\u7801\u751f\u6210"),(0,i.kt)(c,{title:"\u670d\u52a1\u7aef\u89e3\u51b3DTO\u7206\u70b8\u95ee\u9898",mdxType:"Collapse"},(0,i.kt)("p",null,"\u6240\u8c13DTO\u7206\u70b8\uff0c\u6307\u7531\u4e8e\u4e0d\u540c\u7684\u4e1a\u52a1\u67e5\u8be2\u7684\u6570\u636e\u683c\u5f0f\u7684\u4e0d\u540c\uff0c\u5373\u4f7f\u805a\u5408\u6839\u5bf9\u8c61\u7c7b\u578b\u76f8\u540c\uff0c\u4e5f\u8981\u4e3a\u4e0d\u540c\u7684\u6570\u636e\u7ed3\u6784\u5b9a\u4e49\u4e0d\u540c\u7684\u7c7b\u578b\u3002"),(0,i.kt)(f,{title:"\u4f20\u7edf\u65b9\u6848\u4e0b\u7684DTO\u7c7b\u578b\u5b9a\u4e49\u7206\u70b8\u793a\u8303",buttonText:"View example",mdxType:"ViewMore"},(0,i.kt)("p",null,(0,i.kt)("img",{alt:"dto-explosion",src:a(9874).Z,width:"1427",height:"766"}))),(0,i.kt)("p",null,"\u5bf9\u4e8e\u6709\u4e00\u5b9a\u4e1a\u52a1\u590d\u6742\u5ea6\u7684\u9879\u76ee\u800c\u8a00\uff0c\u67e5\u8be2\u4e1a\u52a1\u7684\u79cd\u7c7b\u7e41\u591a\uff0c\u4e0a\u8ff0\u8fd9\u4e9b\u96f7\u540c\u5374\u4e0d\u540c\u7684\u7c7b\u578b\u5c06\u4f1a\u9010\u6e10\u53d8\u591a\u3002\u8fd9\u5c31\u53ebDTO\u7206\u70b8\u95ee\u9898\u3002"),(0,i.kt)("p",null,"DTO\u7206\u70b8\u5b58\u5728\u4e24\u4e2a\u95ee\u9898"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u5bf9\u4e8eMyBatis\u4e3a\u4ee3\u8868\u7684",(0,i.kt)("inlineCode",{parentName:"p"},"DTO\u6620\u5c04\u6d3e"),"\uff08\u76f8\u5bf9\u7684\u6982\u5ff5\u5c31\u662fORM\u6846\u67b6\u8fd9\u7c7b",(0,i.kt)("inlineCode",{parentName:"p"},"\u7edf\u4e00\u5b9e\u4f53\u6620\u5c04\u6d3e"),")\u6846\u67b6\u800c\u8a00\uff0cDTO\u7206\u70b8\u610f\u5473CRUD Mapper\u7f16\u5199\u5de5\u4f5c\u91cf\u7684\u589e\u52a0\uff0c\u5373\u524d\u6587\u66fe\u63d0\u5230\u8fc7\u7684\u201c\u7075\u6d3b\u6027\u662f\u4ee5\u5de5\u4f5c\u91cf\u6fc0\u589e\u4e3a\u4ee3\u4ef7\u7684\u201d\u3002")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u4efb\u4f55\u56e2\u961f\uff0c\u5176\u6210\u5458\u603b\u4e0d\u53ef\u907f\u514d\u65b0\u9648\u4ee3\u8c22\uff0c\u751a\u81f3\u9879\u76ee\u672c\u8eab\u4e5f\u6709\u53ef\u80fd\u8de8\u56e2\u961f\u79fb\u4ea4\u3002\u65b0\u6765\u7684\u5f00\u53d1\u4eba\u5458\u5bf9\u9879\u76ee\u4e2d\u6570\u91cf\u5e9e\u5927\u7684DTO\u7c7b\u578b\u548c\u53d7\u5f71\u54cd\u7684\u529f\u80fd\u672a\u5fc5\u80fd\u505a\u5230\u5168\u7136\u4e86\u89e3\uff0c\u4e0d\u6539\u8d38\u7136\u4fee\u6539\u8001\u4ee3\u7801\uff0c\u5f53\u9762\u4e34\u65b0\u9700\u6c42\u65f6\uff0c\u5f80\u5f80\u4f18\u5148\u9009\u62e9\u5f03\u8001\u4ee3\u7801\u4e0d\u987e\u76f4\u63a5\u5b9a\u4e49\u5168\u65b0\u7684DTO\u3002\u6b64\u4e3e\u4f1a\u8ba9",(0,i.kt)("inlineCode",{parentName:"p"},"DTO\u7206\u70b8\u95ee\u9898"),"\u66f4\u4e25\u91cd\uff0c\u5f62\u6210\u6076\u6027\u5faa\u73af\u3002"))),(0,i.kt)("p",null,"\u6211\u4eec\u5728\u7b2c\u4e00\u7ae0\uff0c\u8c08\u5230\u4e863\u70b9"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u5b9a\u4e49\u7edf\u4e00\u7684\u5b9e\u4f53\u7c7b\u578b"),(0,i.kt)(f,{title:"\u5b9a\u4e49\u5f3a\u7c7b\u578b\u5b9e\u4f53\u4f8b\u5b50",buttonText:"\u56de\u987e",mdxType:"ViewMore"},(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},"package com.example.demo;\n\nimport org.babyfish.jimmer.sql.*;\n\n@Entity\npublic interface Book {\n\n    @Id\n    long id();\n\n    String name();\n\n    int edition();\n\n    BigDecimal price();\n\n    @ManyToOne\n    BookStore store();\n\n    @ManyToMany\n    List<Author> authors();\n}\n"))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},"package com.example.demo\n\nimport org.babyfish.jimmer.sql.*\n\n@Entity\ninterface Book {\n\n    @Id\n    val id: Long\n\n    val name: String\n\n    val edition: Int\n\n    val price: BigDecimal\n\n    @ManyToOne\n    val store: BookStore\n\n    @ManyToMany\n    val authors: List<Author>\n}\n")))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u5b9e\u4f53\u662f\u52a8\u6001\u7684\uff0c\u53ef\u4ee5\u8868\u8fbe\u4efb\u610f\u5f62\u72b6\u7684\u6570\u636e\u7ed3\u6784"),(0,i.kt)(f,{title:"\u52a8\u6001\u5bf9\u8c61\u5bfc\u81f4\u6570\u636e\u7ed3\u6784\u7684\u5f62\u72b6\u5343\u53d8\u4e07\u5316",buttonText:"\u56de\u987e",mdxType:"ViewMore"},(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u6b8b\u7f3a\u5bf9\u8c61"),(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Book book = BookDraft.$.product(book -> {\n    book.setName("Learning GraphQL");\n});\n'))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'val book = new(Book::class).by {\n    name = "Learning GraphQL"\n}\n'))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u5b8c\u6574\u5bf9\u8c61"),(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Book book = BookDraft.$.product(book -> {\n    book.setName("Learning GraphQL");\n    book.setEdition(1);\n    book.setPrice(new BigDecimal("49.99"));\n});\n'))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'val book = new(Book::class).by {\n    name = "Learning GraphQL"\n    edition = 1\n    price = BigDecimal("49.99")\n}\n'))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u9644\u5e26\u5173\u8054"),(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Book book = BookDraft.$.product(book -> {\n    book.setName("Learning GraphQL");\n    book.setEdition(1);\n    book.setPrice(new BigDecimal("49.99"));\n    book.applyStore(store -> {\n        store.setName("O\'REILLY");\n        store.setWebsite("https://www.oreilly.com/");\n    });\n});\n'))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'val book = new(Book::class).by {\n    name = "Learning GraphQL"\n    edition = 1\n    price = BigDecimal("49.99")\n    store().apply {\n        name = "O\'REILLY"\n        website = "https://www.oreilly.com/"\n    }\n}\n'))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u66f4\u591a\u5173\u8054"),(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Book book = BookDraft.$.product(book -> {\n    book.setName("Learning GraphQL");\n    book.setEdition(1);\n    book.setPrice(new BigDecimal("49.99"));\n    book.applyStore(store -> {\n        store.setName("O\'REILLY");\n        store.setWebsite("https://www.oreilly.com/");\n    });\n    book.addIntoAutors(author -> { \n        author.setFirstName("Eve");\n        author.setLastName("Procello");\n        author.setGender(Gender.FEMALE);\n    });\n    book.addIntoAutors(author -> { \n        author.setFirstName("Alex");\n        author.setLastName("Banks");\n        author.setGender(Gender.MALE);\n    });\n});\n'))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'val book = new(Book::class).by {\n    name = "Learning GraphQL"\n    edition = 1\n    price = BigDecimal("49.99")\n    store().apply {\n        name = "O\'REILLY"\n        website = "https://www.oreilly.com/"\n    }\n    authors().addBy {\n        firstName = "Eve"\n        setLastName = "Procello"\n        gender = Gender.FEMALE\n    }\n    authors().addBy {\n        firstName = "Alex"\n        lastName = "Banks"\n        gender = Gender.MALE\n    }\n}\n'))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u66f4\u6df1\u5173\u8054"),(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Book book = BookDraft.$.product(book -> {\n    book.setName("Learning GraphQL");\n    book.setEdition(1);\n    book.setPrice(new BigDecimal("49.99"));\n    book.applyStore(store -> {\n        store.setName("O\'REILLY");\n        store.setWebsite("https://www.oreilly.com/");\n        store.applyAddress(address -> {\n            address.setCity("Sevastopol");\n            address.setState("California");\n        });\n    });\n});\n'))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'val book = new(Book::class).by {\n    name = "Learning GraphQL"\n    edition = 1\n    price = BigDecimal("49.99")\n    store().apply {\n        name = "O\'REILLY"\n        website = "https://www.oreilly.com/"\n        address().apply {\n            city = "Sevastopol"\n            state = "California"\n        }\n    }\n}\n')))))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u53ef\u4ee5\u8f7b\u677e\u63a7\u5236\u88ab\u67e5\u8be2\u6570\u636e\u7ed3\u6784\u7684\u5f62\u72b6"),(0,i.kt)(f,{buttonText:"\u56de\u987e",mdxType:"ViewMore"},(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("video",{width:"100%",controls:!0},(0,i.kt)("source",{src:C.Z,type:"video/mp4"}),(0,i.kt)("div",{style:{padding:"1rem",fontSize:"2rem",color:"red"}},"Your browser does not support the video tag."))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("video",{width:"100%",controls:!0},(0,i.kt)("source",{src:x.Z,type:"video/mp4"}),(0,i.kt)("div",{style:{padding:"1rem",fontSize:"2rem",color:"red"}},"Your browser does not support the video tag."))))))),(0,i.kt)("p",null,"\u6240\u4ee5\uff0cJimmer\u5929\u751f\u907f\u514d\u4e86DTO\u7206\u70b8\u95ee\u9898\u3002"),(0,i.kt)("p",null,"Jimmer\u7684\u52a8\u6001\u5b9e\u4f53\u8fd8\u6709\u5982\u4e0b\u4e24\u4e2a\u7279\u6027"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u672a\u6307\u5b9a\u5c5e\u6027\u5728Jackson\u5e8f\u5217\u5316\u65f6\u4f1a\u88ab\u81ea\u52a8\u5ffd\u7565")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u867d\u7136\u4f5c\u4e3a\u4e00\u4e2aORM\uff0cJimmer\u9f13\u52b1\u5f00\u53d1\u4eba\u5458\u5728\u5b9e\u4f53",(0,i.kt)("strong",{parentName:"p"},"\u7c7b\u578b"),"\u4e4b\u95f4\u58f0\u660e\u53cc\u5411\u5173\u8054\uff0c\u4f46\u662f\uff0c\u5b9e\u4f53",(0,i.kt)("strong",{parentName:"p"},"\u5bf9\u8c61"),"\u4e4b\u95f4\u53ea\u5b58\u5728\u5355\u5411\u5173\u8054\uff0c\u7edd\u4e0d\u4f1a\u6709\u5faa\u73af\u5f15\u7528\uff0c\u5f00\u53d1\u4eba\u5458\u6ca1\u6709\u4efb\u4f55\u624b\u6bb5\u53ef\u4ee5\u7528\u4e8e\u6784\u5efa\u5e26\u6709\u5faa\u73af\u5f15\u7528Jimmer\u5b9e\u4f53\u6570\u636e\u7ed3\u6784\u3002"))),(0,i.kt)("p",null,"\u6240\u4ee5\uff0cJimmer\u52a8\u6001\u5b9e\u4f53\u53ef\u4ee5\u76f4\u63a5\u4f5c\u4e3aweb\u8fd4\u56de\u7c7b\u578b\u3002\u82e5\u65e0\u7279\u6b8a\u9700\u6c42\uff0c\u65e0\u9700\u4efb\u4f55\u8f6c\u5316\uff0c\u76f4\u63a5\u8fd4\u56de\u5373\u53ef\u3002",(0,i.kt)("em",{parentName:"p"},"\uff08\u6ce8\u610f\uff1a\u9700\u8981\u4e3aJackson\u6ce8\u518c\u4e00\u4e2a",(0,i.kt)("inlineCode",{parentName:"em"},"ImmutableModule"),"\u6a21\u5757\uff0c\u4f46\u8fd9\u5df2\u7ecf\u88abjimmer\u7684spring-starter\u81ea\u52a8\u5b8c\u6210\u4e86\uff09"))),(0,i.kt)(c,{title:"\u4e3a\u5ba2\u6237\u7aef\u751f\u6210TypeScrpt\uff0c\u6062\u590dDTO\u7206\u70b8",mdxType:"Collapse"},(0,i.kt)("p",null,"Jimmer\u9009\u62e9\u5728\u670d\u52a1\u7aef\u89e3\u51b3\u4e86DTO\u7206\u70b8\u95ee\u9898\uff0c\u56e0\u4e3aDTO\u7206\u70b8\u95ee\u9898\u5bf9\u670d\u52a1\u7aef\u6709\u5bb3\u3002\u4e0d\u62d4\u9664\u8fd9\u4e2a\u95ee\u9898\uff0c\u5f88\u96be\u7528\u6781\u5c11\u7684\u4ee3\u7801\u5feb\u901f\u5b9e\u73b0\u670d\u52a1\uff0c\u670d\u52a1\u7aef\u96be\u4ee5\u83b7\u5f97\u6781\u81f4\u7684\u5f00\u53d1\u4f53\u9a8c\u3002"),(0,i.kt)("p",null,"\u7136\u800c\uff0c\u5bf9\u5ba2\u6237\u7aef\u800c\u8a00\uff0c\u6070\u6070\u76f8\u53cd\uff0cDTO\u7206\u70b8\u95ee\u9898\u662f\u6709\u76ca\u7684\u3002\u4e30\u5bcc\u7684DTO\u7c7b\u578b\u4e3a\u8c03\u7528\u8005\u660e\u786e\u5b9a\u5b9a\u4e49\u4e86\u7cbe\u786e\u7684\u6570\u636e\u7c7b\u578b\u3002\u4e0d\u6062\u590dDTO\u7206\u70b8\uff0c\u5ba2\u6237\u7aef\u96be\u4ee5\u83b7\u5f97\u6781\u81f4\u7684\u5f00\u53d1\u4f53\u9a8c\u3002"),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u4f20\u7edf\u7684\u6280\u672f\u65b9\u6848\u4e2d\uff0c\u5982\u679c\u671f\u671b\u7531\u6846\u67b6\u5c06\u524d\u540e\u7aef\u5bf9\u63a5\u5de5\u4f5c\u81ea\u52a8\u5316\uff0c\u90a3\u4e48\u901a\u5e38\u4f1a\u4e3a\u670d\u52a1\u7684\u548c\u5ba2\u6237\u7aef\u7684API\u7684\u7406\u89e3\u5f62\u5f0f\u5e94\u8be5\u4e00\u6837\u3002"),(0,i.kt)("p",{parentName:"admonition"},"Jimmer\u4e0d\u8fd9\u6837\u8ba4\u4e3a\uff0c\u53cc\u65b9\u5f00\u53d1\u7684\u5de5\u4f5c\u804c\u8d23\u76f8\u5dee\u592a\u5927\uff0c\u5b83\u4eec\u7684\u601d\u7ef4\u5e94\u8be5\u4e0d\u4e00\u6837\u3002\u670d\u52a1\u7aef\u5e94\u8be5\u7b80\u5355\u5730\u8fd4\u56de\u52a8\u6001\u5bf9\u8c61\uff0c\u8fd9\u6837\u5f88\u5bb9\u6613\u5b9e\u73b0\uff1b\u5ba2\u6237\u7aef\u5e94\u8be5\u4f7f\u7528\u5927\u91cf\u5b9a\u4e49\u597d\u7684\u9759\u6001\u5bf9\u8c61\uff0c\u8fd9\u6837\u6d88\u8d39\u4f53\u9a8c\u597d\u3002")),(0,i.kt)("p",null,"Jimmer\u63d0\u4f9b\u4e00\u79cd\u7b80\u4fbf\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e3a\u5ba2\u6237\u7aef\u81ea\u5b9a\u751f\u6210TypeScrpit\u4ee3\u7801\u5b8c\u6210\u524d\u540e\u7aef\u5bf9\u63a5\uff0c\u5e76\u5728\u5176\u4e2d\u6062\u590dDTO\u7206\u70b8"),(0,i.kt)(f,{title:"\u88ab\u6062\u590d\u7684\u4e09\u79cdBookDTO",buttonText:"\u67e5\u770b\u751f\u6210\u7684TypeScript",mdxType:"ViewMore"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import type { Gender } from '../enums';\n\nexport type BookDto = {\n    // highlight-next-line\n    'BookService/SIMPLE_FETCHER': {\n        readonly id: number, \n        readonly name: string, \n        readonly edition: number\n    }, \n    // highlight-next-line\n    'BookService/COMPLEX_FETCHER': {\n        readonly id: number, \n        readonly createdTime: string, \n        readonly modifiedTime: string, \n        readonly name: string, \n        readonly edition: number, \n        readonly price: number, \n        readonly store?: {\n            readonly id: number, \n            readonly createdTime: string, \n            readonly modifiedTime: string, \n            readonly name: string, \n            readonly website?: string, \n            readonly avgPrice: number\n        }, \n        readonly authors: ReadonlyArray<{\n            readonly id: number, \n            readonly createdTime: string, \n            readonly modifiedTime: string, \n            readonly firstName: string, \n            readonly lastName: string, \n            readonly gender: Gender\n        }>\n    }, \n    // highlight-next-line\n    'BookService/DEFAULT_FETCHER': {\n        readonly id: number, \n        readonly createdTime: string, \n        readonly modifiedTime: string, \n        readonly name: string, \n        readonly edition: number, \n        readonly price: number, \n        readonly store?: {\n            readonly id: number, \n            readonly name: string\n        }, \n        readonly authors: ReadonlyArray<{\n            readonly id: number, \n            readonly firstName: string, \n            readonly lastName: string\n        }>\n    }\n}\n")))),(0,i.kt)("h3",{id:"6-\u62e6\u622a\u5668"},"6. \u62e6\u622a\u5668"),(0,i.kt)(c,{title:"\u8f93\u5165\u62e6\u622a",mdxType:"Collapse"},(0,i.kt)("p",null,"\u8f93\u5165\u62e6\u622a\u5668\u53ef\u4ee5\u62e6\u622aJimmer\u63d2\u5165\u6216\u66f4\u65b0\u5b9e\u4f53\u7684\u884c\u4e3a\uff0c\u5728\u6570\u636e\u88ab\u4fdd\u5b58\u4e4b\u524d\u7ed9\u4e88\u7528\u6237\u4e00\u6b21\u8c03\u6574\u88ab\u4fdd\u5b58\u6570\u636e\u7684\u673a\u4f1a\u3002"),(0,i.kt)("p",null,"\u8f93\u5165\u62e6\u622a\u5668\u548cORM\u89e3\u8026\uff0c\u53ef\u4ee5\u4f7f\u7528\u53ea\u6709\u4e1a\u52a1\u5c42\u624d\u80fd\u62ff\u5230\u7684\u4fe1\u606f\uff08\u6bd4\u5982\u6743\u9650\u7cfb\u7edf\u7684\u4fe1\u606f\uff09\u6765\u8c03\u6574\u5373\u5c06\u88ab\u4fdd\u5b58\u7684\u6570\u636e\u5bf9\u8c61\u3002")),(0,i.kt)(c,{title:"\u8f93\u51fa\u62e6\u622a\uff1a\u5168\u5c40\u8fc7\u6ee4\u5668",mdxType:"Collapse"},(0,i.kt)("p",null,"\u8f93\u51fa\u62e6\u622a\u5668\u4e5f\u79f0\u5168\u5c40\u8fc7\u6ee4\u5668\uff0c\u5728\u7edd\u5927\u90e8\u5206\u67e5\u8be2\u4e2d\u81ea\u52a8\u4e3a\u67d0\u4e9b\u5b9e\u4f53\u7c7b\u578b\u6dfb\u52a0\u800c\u5916\u7684\u8fc7\u6ee4\u6761\u4ef6\uff0c\u5176\u529f\u80fd\u548cHibernate\u7684",(0,i.kt)("a",{parentName:"p",href:"https://docs.jboss.org/hibernate/orm/6.2/javadocs/org/hibernate/annotations/Where.html"},"@Where"),"\u7c7b\u4f3c\u3002"),(0,i.kt)("p",null,"\u5168\u5c40\u8fc7\u6ee4\u5668\u548cORM\u89e3\u8026\uff0c\u53ef\u4ee5\u4f7f\u7528\u53ea\u6709\u4e1a\u52a1\u5c42\u624d\u80fd\u62ff\u5230\u7684\u4fe1\u606f\uff08\u6bd4\u5982\u6743\u9650\u7cfb\u7edf\u7684\u4fe1\u606f\uff09\u6765\u6dfb\u52a0\u989d\u5916\u7684\u8fc7\u6ee4\u6761\u4ef6\u3002"),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u8fd9\u7c7b\u9700\u6c42\u4e2d\u6709\u4e00\u4e2a\u975e\u5e38\u5e38\u89c1\uff1a\u8f6f\u5220\u9664\uff1bJimmer\u5bf9\u5176\u8fdb\u884c\u4e86\u7279\u522b\u652f\u6301\uff0c\u5176\u5168\u5c40\u8fc7\u6ee4\u5668\u88abJimmer\u5185\u7f6e\uff0c\u65e0\u9700\u5f00\u53d1\u4eba\u5458\u63d0\u4f9b\u3002"))),(0,i.kt)(c,{title:"\u591a\u89c6\u89d2\u7f13\u5b58",mdxType:"Collapse"},(0,i.kt)("p",null,"\u5168\u5c40\u8fc7\u6ee4\u5668\u53ef\u4ee5\u4f7f\u7528\u4e1a\u52a1\u5c42\u6743\u9650\u7cfb\u7edf\u7684\u4fe1\u606f\u6765\u4e3a\u67e5\u8be2\u6dfb\u52a0\u989d\u5916\u7684\u8fc7\u6ee4\u6761\u4ef6\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u4e00\u4e2a\u73b0\u8c61\uff1a\u5373\u4fbf\u900f\u8fc7\u5b8c\u5168\u76f8\u540c\u7684\u67e5\u8be2\u529f\u80fd\uff0c\u4e0d\u540c\u8eab\u4efd\u7684\u7528\u6237\u4e5f\u4f1a\u770b\u5230\u4e0d\u540c\u7684\u6570\u636e\u3002"),(0,i.kt)("p",null,"\u4e3a\u6b64\uff0cJimmer\u5f15\u5165\u4e86\u591a\u89c6\u89d2\u7f13\u5b58\uff0c\u8ba9\u4e0d\u540c\u8eab\u4efd\u7684\u7528\u6237\u4e5f\u4f1a\u770b\u5230\u4e0d\u540c\u7684\u7f13\u5b58\u3002"),(0,i.kt)(f,{buttonText:"\u67e5\u770b\u793a\u610f\u56fe",title:"\u591a\u89c6\u89d2\u7f13\u5b58\u56fe\u793a",mdxType:"ViewMore"},(0,i.kt)("p",null,(0,i.kt)("img",{alt:"multi-view-cache",src:a(917).Z,width:"1473",height:"2451"})))),(0,i.kt)("h3",{id:"7-\u6781\u81f4\u6027\u80fd"},"7. \u6781\u81f4\u6027\u80fd"),(0,i.kt)(c,{title:"\u89e3\u51b3\u4f20\u7edfORM\u4f1a\u88ab\u65b0\u624b\u8bf1\u53d1\u4f4e\u6027\u80fdSQL\u7684\u95ee\u9898",mdxType:"Collapse"},(0,i.kt)("p",null,"\u4f20\u7edfORM\u5bb9\u6613\u88ab\u65b0\u624b\u8bf1\u53d1\u5730\u6027\u80fdSQL\uff0c\u8fd9\u7c7b\u95ee\u9898\u662f\u6709\u4e24\u4e2a\u65b9\u9762\u7684\u539f\u56e0\u5bfc\u81f4\u7684\uff0cJimmer\u90fd\u7ed9\u4e88\u4e86\u89e3\u51b3\u3002"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u7edd\u4e0d\u4f1a\u5bfc\u81f4\u5185\u5b58\u5206\u9875"),(0,i.kt)("p",{parentName:"li"},"\u4ee5Hibernate\u4e3a\u4f8b\uff0c\u5f53\u5f00\u53d1\u4eba\u5458\u540c\u4e8b\u4f7f\u7528",(0,i.kt)("inlineCode",{parentName:"p"},"collection-join-fetch"),"\u548c\u5206\u9875\u67e5\u8be2\u65f6\uff0c\u4f1a\u8bf1\u53d1\u5185\u5b58\u5206\u9875\uff0c\u8bf7\u53c2\u89c1",(0,i.kt)("a",{parentName:"p",href:"https://vladmihalcea.com/fix-hibernate-hhh000104-entity-fetch-pagination-warning-message/"},"\u8fd9\u91cc")),(0,i.kt)("p",{parentName:"li"},"Jimmer\u4e2d\u6ca1\u6709",(0,i.kt)("inlineCode",{parentName:"p"},"join-fetch"),"\u7684\u6982\u5ff5\uff0c\u6240\u4ee5\uff0c\u4e0d\u4f1a\u6709\u8fd9\u4e2a\u95ee\u9898")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u4e0d\u4f1a\u56e0lazy-loading\u5bfc\u81f4",(0,i.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem-in-orm-object-relational-mapping"},"N + 1"),"\u95ee\u9898"),(0,i.kt)("p",{parentName:"li"},"Jimmer\u4e0d\u652f\u6301lazy-loading\uff0c\u88ab\u67e5\u8be2\u7684\u6570\u636e\u7ed3\u6784\u7684\u5f62\u72b6\u90fd\u662f\u4e8b\u5148\u6307\u5b9a\u7684\u3002\u56e0\u4e3a"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"B/S\u6216\u5fae\u670d\u52a1\u67b6\u6784\u4e0d\u5141\u8bb8\u5b9e\u4f53\u5bf9\u8c61\u6301\u6709\u6570\u636e\u5e93\u8fde\u63a5\uff0clazy-loading\u65b9\u6848\u65e0\u7528")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u4e00\u65e6\u652f\u6301lazy-loading\uff0c\u65b0\u624b\u5c31\u53ef\u80fd\u4e0d\u505a\u4efb\u4f55\u6df1\u5165\u914d\u7f6e\uff0c\u653e\u4efblazy-loading\u673a\u5236\u9891\u7e41\u5236\u9020",(0,i.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem-in-orm-object-relational-mapping"},"N + 1"),"\u95ee\u9898\u3002"))),(0,i.kt)("p",{parentName:"li"},"Jimmer\u7075\u6d3b\u63a7\u5236\u88ab\u67e5\u8be2\u6570\u636e\u7ed3\u6784\u7684\u5f62\u72b6\uff0c\u5176\u5185\u90e8\u673a\u5236\u5bf9\u7528\u6237\u900f\u660e\u3002\u5e95\u5c42\u67e5\u8be2\u53ef\u80fd\u6d89\u53ca\u6570\u636e\u5e93\u8bbf\u95ee\uff0c\u7f13\u5b58\u8bbf\u95ee\uff0c\u7528\u6237\u81ea\u5b9a\u4e49\u8ba1\u7b97\u751a\u81f3\u8de8\u8d8a\u5fae\u670d\u52a1\u8fb9\u754c\u7684\u8fdc\u7a0b\u8c03\u7528\u3002\u4f46\u65e0\u8bba\u662f\u4f55\u79cd\u5e95\u5c42\u884c\u4e3a\uff0c\u90fd\u6ca1\u6709",(0,i.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem-in-orm-object-relational-mapping"},"N + 1"),"\u95ee\u9898\uff0c\u56e0\u4e3a\u88ab\u67e5\u8be2\u7684\u6570\u636e\u7ed3\u6784\u7684\u5f62\u72b6\u603b\u662f\u4e8b\u5148\u6307\u5b9a\u7684\uff0c\u800c\u975e\u67e5\u8be2\u540e\u7684lazy-loading\u3002"),(0,i.kt)("admonition",{parentName:"li",type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u4e8b\u5b9e\u4e0a\uff0cJimmer\u751f\u6210SQL\u5e76\u6267\u884c\uff0c\u4e00\u5b9a\u662f\u56e0\u4e3a\u5f00\u53d1\u4eba\u5458",(0,i.kt)("strong",{parentName:"p"},"\u663e\u5f0f"),"\u8c03\u7528\u4e86\u5176\u5177\u6709\u660e\u786eCRUD\u6027\u8d28\u7684API\uff0c\u7edd\u4e0d\u4f1a\u5982\u4f20\u7edfORM\u4e00\u6837\u5728\u5176\u4ed6\u64cd\u4f5c\uff0c\u6bd4\u5982\u5bf9\u6570\u636e\u5bf9\u8c61\u7684\u5904\u7406\u8fc7\u7a0b\u4e2d\uff0c\u56e0lazy-loading\u8fd9\u7c7b\u884c\u4e3a\u5bfc\u81f4SQL\u88ab",(0,i.kt)("strong",{parentName:"p"},"\u9690\u5f0f"),"\u5730\u6267\u884c\u3002"),(0,i.kt)("p",{parentName:"admonition"},"\u56e0\u6b64\uff0c\u5728Spring\u9879\u76ee\u4e2d\u8bbe\u7f6e",(0,i.kt)("a",{parentName:"p",href:"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/annotation/Transactional.html#readOnly()"},"Transactinal.readOnly()"),"\u5bf9Jimmer\u800c\u8a00\u6ca1\u6709\u610f\u4e49\u3002"),(0,i.kt)("p",{parentName:"admonition"},"\u6240\u4ee5\uff0c\u5728Jimmer\u7684Spring\u9879\u76ee\u4e2d\uff0c\u76f4\u63a5\u7528",(0,i.kt)("a",{parentName:"p",href:"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/annotation/Transactional.html"},"@Transactional"),"\u4fee\u9970\u4e1a\u52a1\u7c7b\u5373\u53ef\uff1b\u6ca1\u6709\u5fc5\u8981\u7528",(0,i.kt)("a",{parentName:"p",href:"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/annotation/Transactional.html"},"@Transactional"),"\u4fee\u9970\u6bcf\u4e2a\u4e1a\u52a1\u65b9\u6cd5\uff0c\u5e76\u5c06\u6240\u6709\u67e5\u8be2\u65b9\u6cd5\u7684",(0,i.kt)("a",{parentName:"p",href:"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/annotation/Transactional.html"},"@Transactional"),"\u6307\u5b9a",(0,i.kt)("inlineCode",{parentName:"p"},"readOnly = true"),"\u3002"))))),(0,i.kt)(c,{title:"\u9ad8\u6027\u80fd\u7684\u5bf9\u8c61\u6620\u5c04",mdxType:"Collapse"},(0,i.kt)("p",null,"\u9664\u4e86\u4fdd\u8bc1\u4e0d\u4f1a\u88ab\u65b0\u624b\u8bf1\u5bfc\u51fa\u4f4e\u6027\u80fdSQL\u5916\uff0cJimmer\u672c\u8eab\u5bf9\u7ed3\u679c\u96c6\u7684\u6620\u5c04\u6027\u80fd\u4e5f\u975e\u5e38\u9ad8\u3002"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u4ee5\u524d\uff0c\u6570\u636e\u5e93\u9879\u76ee\u7684\u5927\u90e8\u5206\u65f6\u95f4\u90fd\u662f\u5728\u7b49\u5f85JDBC\u963b\u585e\uff0cORM\u672c\u8eab\u7684\u6620\u5c04\u6027\u80fd\u65e0\u5173\u75db\u75d2\u3002")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u73b0\u5728\uff0cJVM\u529b\u63a8\u865a\u62df\u7ebf\u7a0b\u3002\u5728\u8fd9\u4e2a\u6a21\u5f0f\u4e0b\uff0cORM\u672c\u8eab\u7684\u6620\u5c04\u6027\u80fd\u9ad8\uff0c\u53ef\u4ee5\u8ba9\u5176carrier\u7ebf\u7a0b\u5c3d\u5feb\u5b8c\u6210\u4efb\u52a1\u540e\u53bb\u625b\u8d77\u66f4\u591a\u7684\u865a\u62df\u7ebf\u7a0b\uff0c\u5177\u5907\u5f88\u91cd\u8981\u7684\u610f\u4e49\u3002"))),(0,i.kt)(f,{buttonText:"\u67e5\u770b\u6027\u80fd\u62a5\u544a",title:"Benchmark",mdxType:"ViewMore"},(0,i.kt)("p",null,"\u57fa\u51c6\u6d4b\u8bd5\u7684\u6e90\u4ee3\u7801",(0,i.kt)("a",{parentName:"p",href:"https://github.com/babyfish-ct/jimmer/tree/main/benchmark"},"\u5728\u6b64"),"\uff0c\u4f7f\u7528H2\u7684\u5185\u5b58\u6570\u636e\u5e93\uff0c\u65e0\u9700\u4efb\u4f55\u73af\u5883\u51c6\u5907\u5373\u53ef\u76f4\u63a5\u8fd0\u884c\u3002"),(0,i.kt)("h1",{id:"\u5b9e\u73b0\u539f\u5219"},"\u5b9e\u73b0\u539f\u5219"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"\u6240\u6709\u6846\u67b6\u7981\u7528\u7f13\u5b58")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"\u6240\u6709\u6846\u67b6\u5173\u95ed\u65e5\u5fd7")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"\u6240\u6709\u6846\u67b6\u6bcf\u6b21\u90fd\u6253\u5f00\u548c\u5173\u95ed\u8fde\u63a5/\u4f1a\u8bdd\uff0c\u4e0d\u505a\u5171\u4eab\uff1b\u9760\u8fde\u63a5\u6c60\u4fdd\u8bc1\u6027\u80fd\u3002")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"\u63a5\u5165Spring\u7684\u8fde\u63a5\u7ba1\u7406\u673a\u5236\u3002\u56e0\u4e0d\u540c\u6846\u67b6API\u4e0d\u540c\uff0c\u5b9e\u73b0\u65b9\u6cd5\u7565\u6709\u4e0d\u540c\u3002"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u6709\u7684\u4f7f\u7528",(0,i.kt)("a",{parentName:"li",href:"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/datasource/DataSourceUtils.html"},"DataSourceUtils"),"\u7684getConnection\u548creleaseConnection"),(0,i.kt)("li",{parentName:"ul"},"\u6709\u7684\u4f7f\u7528",(0,i.kt)("a",{parentName:"li",href:"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/datasource/TransactionAwareDataSourceProxy.html"},"TransactionAwareDataSourceProxy"))),(0,i.kt)("p",{parentName:"li"},"\u4f46\u6700\u7ec8\u6548\u679c\u90fd\u4e00\u6837")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"\u4e0d\u4f7f\u7528\u4e8b\u52a1"),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"Exposed"),"\u6bd4\u8f83\u7279\u6b8a\uff0c\u5176API\u5f3a\u5236\u8981\u6c42\u4e8b\u52a1\uff0c\u7ed9\u4e88\u5047\u7684\u5b9e\u73b0\u3002")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"\u4f7f\u7528\u5d4c\u5165\u7684H2\u5185\u6570\u636e\u5e93\uff0c\u5c3d\u53ef\u80fd\u538b\u7f29\u6570\u636e\u5e93\u7684\u6d88\u8017\uff0c\u51f8\u663eORM\u672c\u8eab\u7684\u6027\u80fd\uff0c\u5373\u6620\u5c04\u7684\u6027\u80fd\u3002"))),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u7531\u4e8eSpring\u79fb\u9664\u4e86\u5bf9OpenJPA\u7684\u652f\u6301\uff0c\u672c\u57fa\u51c6\u6d4b\u8bd5\u4e0d\u5305\u542b",(0,i.kt)("inlineCode",{parentName:"p"},"JPA(OpenJPA)"))),(0,i.kt)("h1",{id:"\u7ed3\u679c\u6570\u636e"},"\u7ed3\u679c\u6570\u636e"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u6bcf\u79d2\u91cd\u590d\u67e5\u8be2\u6b21\u6570"),(0,i.kt)(j.L,{type:"OPS",locale:"zh",mdxType:"Benchmark"}),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u6a2a\u5750\u6807\uff1a\u6bcf\u6b21\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u5230\u7684\u6570\u636e\u5bf9\u8c61\u7684\u6570\u91cf"),(0,i.kt)("li",{parentName:"ul"},"\u7eb5\u5750\u6807\uff1a\u6bcf\u79d2\u64cd\u4f5c\u6b21\u6570"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u6bcf\u6b21\u64cd\u4f5c\u8017\u65f6"),(0,i.kt)(j.L,{type:"TIME",locale:"zh",mdxType:"Benchmark"}),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u6a2a\u5750\u6807\uff1a\u6bcf\u6b21\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u5230\u7684\u6570\u636e\u5bf9\u8c61\u7684\u6570\u91cf"),(0,i.kt)("li",{parentName:"ul"},"\u7eb5\u5750\u6807\uff1a\u6bcf\u6b21\u64cd\u4f5c\u8017\u65f6(\u5fae\u79d2)")))))),(0,i.kt)("h3",{id:"8-\u4e0d\u53ef\u53d8\u5bf9\u8c61--\u6781\u7b80\u8bbe\u8ba1"},"8. \u4e0d\u53ef\u53d8\u5bf9\u8c61 + \u6781\u7b80\u8bbe\u8ba1"),(0,i.kt)(c,{title:"\u4e0d\u53ef\u53d8\u5b9e\u4f53",mdxType:"Collapse"},(0,i.kt)("p",null,"\u524d\u9762\u8c08\u5230\uff0cJimmer\u5b9e\u4f53\u662f\u52a8\u6001\u5bf9\u8c61\u3002\u4e0d\u4ec5\u5982\u6b64\uff0cJimmer\u5b9e\u4f53\u8fd8\u662f\u4e0d\u53ef\u53d8\u5bf9\u8c61\u3002"),(0,i.kt)("p",null,"\u4e0d\u53ef\u53d8\u5bf9\u8c61\u4f18\u70b9\u5f88\u591a\uff0c\u6bd4\u5982"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u6240\u4ee5\u968f\u610f\u5171\u4eab\uff0c\u6bd4\u5982\uff0c\u8fdb\u7a0b\u5185\u7f13\u5b58\u3002\u591a\u4eba\u5f00\u53d1\u6a21\u5f0f\u4e0b\u4e0d\u7528\u62c5\u5fc3\u88ab\u5176\u4ed6\u540c\u4e8b\u65e0\u610f\u4fee\u6539\uff0c\u66f4\u65e0\u9700\u4e3a\u4e3a\u6b64\u505a\u9632\u5fa1\u6027\u590d\u5236\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u6ca1\u6709\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u5177\u5907\u7a33\u5b9a\u7684hashCode\uff0c\u5bf9\u96c6\u5408\u6846\u67b6\u53cb\u597d")),(0,i.kt)("p",null,"\u73b0\u4ee3\u8bed\u8a00\u9010\u6e10\u91cd\u89c6\u4e0d\u53ef\u53d8\u5bf9\u8c61\uff0c\u6bd4\u5982\uff0cJava14\u548cC#9\u5f15\u5165\u4e86\u4e0d\u53ef\u53d8\u7684record\u7c7b\u578b\uff0ckotlin data class\u5bf9\u4e0d\u53ef\u53d8\u5bf9\u8c61\u652f\u6301\u4e5f\u975e\u5e38\u597d\u3002\u8fd9\u4e9b\u7f16\u7a0b\u8bed\u8a00\u7684\u53d1\u5c55\u65b9\u5411\u663e\u793a\u4e86\u8fd9\u662f\u672a\u6765\u7684\u5fc5\u7136\u8d8b\u52bf\u3002"),(0,i.kt)("p",null,"\u5bf9ORM\u800c\u8a00\uff0c\u60c5\u51b5\u7565\u6709\u4e0d\u540c\u3002\u4e0d\u4f46\u5bf9\u8c61\u5b57\u6bb5\u591a\uff0c\u5bf9\u8c61\u7684\u5173\u8054\u4e5f\u53ef\u80fd\u5f88\u6df1\uff0c\u5373\u4f7fORM\u4e2d\u5bf9\u8c61\u975e\u5e38\u590d\u6742\uff0c\u5f80\u5f80\u4ee3\u8868\u4e00\u4e2a\u5e9e\u5927\u7684\u6570\u636e\u7ed3\u6784\uff0c\u800c\u975e\u4e00\u4e2a\u7b80\u5355\u7684\u5b64\u5355\u5bf9\u8c61\u3002"),(0,i.kt)("p",null,"\u8fd9\u79cd\u590d\u6742\u5bf9\u8c61\u66b4\u9732\u4e86\u4e0d\u53ef\u53d8\u5bf9\u8c61\u7684\u6700\u5927\u7f3a\u70b9\uff0c\u57fa\u4e8e\u73b0\u6709\u5bf9\u8c61\u5bf9\u67d0\u4e9b\u5c5e\u6027\u505a\u51fa\u8c03\u6574\u540e\u521b\u5efa\u65b0\u5bf9\u8c61\uff0c\u5373",(0,i.kt)("inlineCode",{parentName:"p"},"\u590d\u5236\u6784\u9020"),"\uff0c\u5c06\u4f1a\u53d8\u6210\u975e\u5e38\u590d\u6742\u7684\u4e8b\u60c5\u3002"),(0,i.kt)(f,{title:"\u5e38\u89c4\u4e0d\u53ef\u53d8\u5bf9\u8c61\u7684\u6700\u5927\u95ee\u9898",buttonText:"\u67e5\u770b\u539f\u56e0",mdxType:"ViewMore"},(0,i.kt)("p",null,"\u9996\u5148\u5b9a\u4e49\u4e00\u4e2a\u4e0d\u53ef\u53d8\u7684\u6811\u8282\u70b9"),(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="TreeNode.java"',title:'"TreeNode.java"'},"record TreeNode(String name, List<TreeNode> childNodes) {}\n"))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="TreeNode.java"',title:'"TreeNode.java"'},"data class TreeNode(val name: String, val childNodes: List<TreeNode>)\n")))),(0,i.kt)("p",null,"\u51c6\u5907\u4e00\u4e2a\u65e7\u5bf9\u8c61"),(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"var oldTreeNode = ...blabla...\n"))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},"val oldTreeNode = ...blabla...\n")))),(0,i.kt)("p",null,"\u8ba9\u6211\u4eec\u4ece\u7b80\u5355\u5230\u590d\u6742\u4f9d\u6b21\u5b9e\u73b0\u4e09\u79cd\u6570\u636e\u53d8\u66f4\u64cd\u4f5c\uff0c\u521b\u5efa\u5168\u65b0\u7684\u5bf9\u8c61"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"\u53d8\u66f4\u6839\u8282\u70b9\u7684name\u5c5e\u6027"),(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",lable:"Java",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'TreeNode newTreeNode = new TreeNode(\n    // highlight-next-line\n    "Hello", // \u8bbe\u7f6e\u6839\u8282\u70b9\u7684\u540d\u79f0\n    oldTreeNode.childNodes()\n);\n'))),(0,i.kt)(T.Z,{value:"kotlin",lable:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'val newTreeNode = oldTreeNode.copy(\n    // highlight-next-line\n    name = "Hello" // \u8bbe\u7f6e\u6839\u8282\u70b9\u7684\u540d\u79f0\n);\n'))))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"\u53d8\u66f4\u7b2c\u4e00\u7ea7\u5b50\u8282\u70b9\u7684name\u5c5e\u6027"),(0,i.kt)("p",{parentName:"li"},"\u9762\u5305\u5c51\u6761\u4ef6\u5982\u4e0b\uff1a"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u7b2c\u4e00\u7ea7\u5b50\u8282\u70b9\u7684\u4f4d\u7f6e: pos1")),(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'TreeNode newTreeNode = new TreeNode(\n    oldTreeNode.name(),\n    IntStream\n        .range(0, oldTreeNode.childNodes().size())\n        .mapToObj(index1 -> {\n            TreeNode oldChild1 = oldTreeNode.childNodes().get(index1);\n            if (index1 != pos1) {\n                return oldChild1;\n            }\n            return new TreeNode(\n                // highlight-next-line\n                "Hello", // \u8bbe\u7f6e\u7b2c\u4e00\u7ea7\u5b50\u8282\u70b9\u7684\u540d\u79f0\n                oldChild1.childNodes()\n            );\n        })\n        .toList()\n);\n'))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'val newTreeNode = oldTreeNode.copy(\n    childNodes = oldTreeNode\n        .childNodes\n        .mapIndexed { index1, child1 ->\n            if (index1 == pos1) {\n                child1.copy(\n                    // highlight-next-line\n                    name = "Hello" // \u8bbe\u7f6e\u7b2c\u4e00\u7ea7\u5b50\u8282\u70b9\u7684\u540d\u79f0\n                )\n            } else {\n                child1\n            }\n        }\n)\n'))))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"\u53d8\u66f4\u7b2c\u4e8c\u7ea7\u5b50\u8282\u70b9\u7684name\u5c5e\u6027"),(0,i.kt)("p",{parentName:"li"},"\u9762\u5305\u5c51\u6761\u4ef6\u5982\u4e0b\uff1a"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u7b2c\u4e00\u7ea7\u5b50\u8282\u70b9\u7684\u4f4d\u7f6e: pos1"),(0,i.kt)("li",{parentName:"ul"},"\u7b2c\u4e8c\u7ea7\u5b50\u8282\u70b9\u7684\u4f4d\u7f6e: pos2")),(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'TreeNode newTreeNode = new TreeNode(\n    oldTreeNode.name(),\n    IntStream\n        .range(0, oldTreeNode.childNodes().size())\n        .mapToObj(index1 -> {\n            TreeNode oldChild1 = oldTreeNode.childNodes().get(index1);\n            if (index1 != pos1) {\n                return oldChild1;\n            }\n            return new TreeNode(\n                oldChild1.name(),\n                IntStream\n                    .range(0, oldChild1.childNodes().size())\n                    .mapToObj(index2 -> {\n                        TreeNode oldChild2 = oldChild1.childNodes().get(index2);\n                        if (index2 != pos2) {\n                            return oldChild2;\n                        } else {\n                            return new TreeNode(\n                                // highlight-next-line\n                                "Hello", // \u8bbe\u7f6e\u7b2c\u4e8c\u7ea7\u5b50\u8282\u70b9\u7684\u540d\u79f0\n                                oldChild2.childNodes()\n                            );\n                        }\n                    })\n                    .toList()\n            );\n        })\n        .toList()\n);\n'))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'val newTreeNode = oldTreeNode.copy(\n    childNodes = oldTreeNode\n        .childNodes\n        .mapIndexed { index1, child1 ->\n            if (index1 == pos1) {\n                child1.copy(\n                    childNodes = child1\n                        .childNodes\n                        .mapIndexed { index2, child2 -> \n                            if (index2 == pos2) {\n                                child2.copy(\n                                    // highlight-next-line\n                                    name = "Hello" // \u8bbe\u7f6e\u7b2c\u4e8c\u7ea7\u5b50\u8282\u70b9\u7684\u540d\u79f0\n                                )\n                            } else {\n                                child2\n                            }\n                        }\n                )\n            } else {\n                child1\n            }\n        }\n)\n')))))),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u53ef\u89c1\uff0c\u53ea\u8981\u5bf9\u8c61\u6811\u6709\u4e00\u70b9\u6df1\u5ea6\uff0c\u57fa\u4e8e\u53e6\u4e00\u4e2a\u4e0d\u53ef\u53d8\u5bf9\u8c61\u521b\u5efa\u65b0\u7684\u4e0d\u53ef\u53d8\u5bf9\u8c61\u5c06\u662f\u4e00\u573a\u5669\u68a6\u3002"))),(0,i.kt)("p",null,"\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u8bed\u8a00\u672c\u8eab\u652f\u6301\u7684\u4e0d\u53ef\u53d8\u5bf9\u8c61\uff0c\u4e3a\u7b80\u5355\u4e0d\u53ef\u53d8\u5bf9\u8c61\u8bbe\u8ba1\uff0c\u800c\u975e\u4e3a\u590d\u6742\u7684\u4e0d\u53ef\u53d8\u5bf9\u8c61\u800c\u8bbe\u8ba1\u3002\u5bf9\u590d\u6742\u4e0d\u53ef\u53d8\u5bf9\u8c61\u7684",(0,i.kt)("inlineCode",{parentName:"p"},"\u590d\u5236\u6784\u9020"),"\u96be\u9898\u65e0\u80fd\u4e3a\u529b\u3002"),(0,i.kt)("p",null,"\u56e0\u6b64\uff0c\u8bde\u751f\u4e86\u4e00\u4e9b\u4e0d\u53ef\u53d8\u5bf9\u8c61\u6846\u67b6"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://immutables.github.io/immutable.html"},"Immutables")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/inferred/FreeBuilder"},"FreeBuilder")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://arrow-kt.io/learn/immutable-data/intro/"},"Arrow-Kt(Kotlin)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://kopyk.at/"},"Kopyk(Kotlin)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/PatilShreyas/mutekt"},"MuteKt(Kotlin)"))),(0,i.kt)("p",null,"Jimmer\u4e5f\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u671f\u671b\u8ba9\u590d\u6742\u4e0d\u53ef\u53d8\u5bf9\u8c61\u7684",(0,i.kt)("inlineCode",{parentName:"p"},"\u590d\u5236\u6784\u9020"),"\u53d8\u5f97\u5982\u540c\u4fee\u6539\u53ef\u53d8\u5bf9\u8c61\u4e00\u6837\u7b80\u5355\uff0c\u5e76\u540c\u65f6\u9002\u7528\u4e8ejava\u548ckotlin\u7684\u65b9\u6848\u3002"),(0,i.kt)("p",null,"\u5e78\u8fd0\u7684\u662f\uff0cjs/ts\u9886\u57df\u5df2\u7ecf\u5b58\u5728\u4e00\u4e2a\u8db3\u591f\u5f3a\u5927\u548c\u4f18\u96c5\u7684\u65b9\u6848\uff1a",(0,i.kt)("a",{parentName:"p",href:"https://github.com/immerjs/immer"},"immmer")),(0,i.kt)("p",null,"Jimmer\u5c06\u5b83\u79fb\u690d\u5230\u4e86java/kotlin\u4e0b\uff0c\u590d\u6742\u4e0d\u53ef\u53d8\u5bf9\u8c61\u7684",(0,i.kt)("inlineCode",{parentName:"p"},"\u590d\u5236\u6784\u9020"),"\u53d8\u5f97\u5982\u540c\u76f4\u63a5\u4fee\u6539\u53ef\u53d8\u5bf9\u8c61\u4e00\u6837\u7b80\u5355\uff0c\u975e\u5e38\u7b80\u5355\u81ea\u7136 ",(0,i.kt)("em",{parentName:"p"},"\uff08\u5c24\u5176\u662fkotlin\u7248\u672c\uff09")),(0,i.kt)(f,{title:"\u590d\u6742\u4e0d\u53ef\u53d8\u5bf9\u8c61\u7684\u590d\u5236\u6784\u9020",buttonText:"View example",mdxType:"ViewMore"},(0,i.kt)("h1",{id:"\u5b9a\u4e49\u4e0d\u53ef\u53d8\u7c7b\u578b"},"\u5b9a\u4e49\u4e0d\u53ef\u53d8\u7c7b\u578b"),(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"package yourpackage;\n\nimport java.util.List;\n\nimport org.babyfish.jimmer.Immutable;\nimport org.jetbrains.annotations.Nullable;\n\n// \u6f14\u793a\u6b64\u529f\u80fd\u65e0\u9700ORM\u7684@Entity\uff0c\u975eORM\u7684@Immutable\u8db3\u591f\n@Immutable \npublic interface TreeNode {\n    \n    String name();\n\n    @Nullable\n    TreeNode parent();\n\n    List<TreeNode> childNodes();\n}\n"))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="TreeNode.kt"',title:'"TreeNode.kt"'},"package yourpackage\n\nimport org.babyfish.jimmer.Immutable\n\n// \u6f14\u793a\u6b64\u529f\u80fd\u65e0\u9700ORM\u7684@Entity\uff0c\u975eORM\u7684@Immutable\u8db3\u591f\n@Immutable\ninterface TreeNode {\n\n    val name: String\n\n    val parent: TreeNode?\n\n    val childNodes: List<TreeNode>\n}\n")))),(0,i.kt)("h1",{id:"\u4f7f\u7528"},"\u4f7f\u7528"),(0,i.kt)(w.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(T.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'// \u7b2c\u4e00\u6b65\uff0c\u4ece\u5934\u6784\u5efa\u5168\u65b0\u7684\u6570\u636e\nTreeNode treeNode = TreeNodeDraft.$.produce(root -> {\n    root.setName("Root").addIntoChildNodes(food -> {\n        food\n            .setName("Food")\n            .addIntoChildNodes(drink -> {\n                drink\n                    .setName("Drink")\n                    .addIntoChildNodes(cococola -> {\n                        cococola.setName("Cococola");\n                    })\n                    .addIntoChildNodes(fanta -> {\n                        fanta.setName("Fanta");\n                    });\n                ;\n            });\n        ;\n    });\n});\n\n// \u7b2c\u4e8c\u6b65\uff0c\u57fa\u4e8e\u73b0\u6709\u6570\u636e\u5bf9\u8c61\uff0c\u505a\u67d0\u4e9b\u201c\u53d8\u66f4\u201d\uff0c\u521b\u5efa\u65b0\u7684\u6570\u636e\u5bf9\u8c61\u3002\nTreeNode newTreeNode = TreeNodeDraft.$.produce(\n        // highlight-next-line\n        treeNode, // existing data\n        root -> {\n            root\n                .childNodes(false).get(0) // Food\n                .childNodes(false).get(0) // Drink\n                .childNodes(false).get(0) // Cococola\n                .setName("Cococola plus");\n        }\n);\n\nSystem.out.println("treeNode:" + treeNode);\nSystem.out.println("newTreeNode:" + newTreeNode);\n'))),(0,i.kt)(T.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'// \u7b2c\u4e00\u6b65\uff0c\u4ece\u5934\u6784\u5efa\u5168\u65b0\u7684\u6570\u636e\nval treeNode = new(TreeNode::class).by {\n    name = "Root"\n    childNodes().addBy {\n        name = "Food"\n        childNodes().addBy {\n            name = "Drinks"\n            childNodes().addBy {\n                name = "Cococola"\n            }\n            childNodes().addBy {\n                name = "Fanta"\n            }\n        }\n    }\n}\n\n// \u7b2c\u4e8c\u6b65\uff0c\u57fa\u4e8e\u73b0\u6709\u6570\u636e\u5bf9\u8c61\uff0c\u505a\u67d0\u4e9b\u201c\u53d8\u66f4\u201d\uff0c\u521b\u5efa\u65b0\u7684\u6570\u636e\u5bf9\u8c61\u3002\nval newTreeNode = new(TreeNode::class).by(\n    // highlight-next-line\n    treeNode // existing data\n) {\n    childNodes()[0] // Food\n        .childNodes()[0] // Drinks\n        .childNodes()[0] // Cococola\n        .name += " plus"\n}\n\nprintln("treeNode: $treeNode")\nprintln("newTreeNode: $newTreeNode")\n')))),(0,i.kt)("p",null,"\u8f93\u51fa\u7ed3\u679c\uff08\u5b9e\u9645\u6253\u5370\u7ed3\u679c\u662f\u7d27\u51d1\u7684\uff0c\u4f46\u4e3a\u4e86\u65b9\u4fbf\u9605\u8bfb\uff0c\u8fd9\u91cc\u8fdb\u884c\u4e86\u683c\u5f0f\u5316\uff09"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'treeNode: {\n    "name":"Root",\n    "childNodes":[\n        {\n            "name":"Food",\n            "childNodes":[\n                {\n                    "name":"Drink",\n                    "childNodes":[\n                        // highlight-next-line\n                        {"name":"Coco Cola"},\n                        {"name":"Fanta"}\n                    ]\n                }\n            ]\n        }\n    ]\n}\nnewTreeNode: {\n    "name":"Root",\n    "childNodes":[\n        {\n            "name":"Food",\n            "childNodes":[\n                {\n                    "name":"Drink",\n                    "childNodes":[\n                        // highlight-next-line\n                        {"name":"Coco Cola plus"},\n                        {"name":"Fanta"}\n                    ]\n                }\n            ]\n        }\n    ]\n}\n'))),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u672c\u6846\u67b6\u53ebJimmer\uff0c\u662f\u4e3a\u4e86\u81f4\u656c",(0,i.kt)("a",{parentName:"p",href:"https://github.com/immerjs/immer"},"immmer")))),(0,i.kt)(c,{title:"\u6781\u7b80\u8bbe\u8ba1",mdxType:"Collapse"},(0,i.kt)("p",null,"\u5f88\u591a\u6570\u6570\u636e\u64cd\u4f5c\u6846\u67b6\u7684API\u5165\u53e3\uff0c\u90fd\u7528\u4e00\u4e2a\u65e0\u72b6\u6001\u7684\u5168\u5c40\u5bf9\u8c61\u6784\u5efa\u751f\u547d\u5468\u671f\u6709\u9650\u7684\u4e34\u65f6\u6709\u72b6\u6001\u5bf9\u8c61\u3002\n\u6bd4\u5982JPA\u7684",(0,i.kt)("a",{parentName:"p",href:"https://docs.oracle.com/javaee/7/api/javax/persistence/EntityManagerFactory.html"},"EntityManagerFactory"),"\u548c",(0,i.kt)("a",{parentName:"p",href:"https://docs.oracle.com/javaee/7/api/javax/persistence/EntityManager.html"},"EntityManager"),"\uff0cHibernate\u7684",(0,i.kt)("a",{parentName:"p",href:"https://docs.jboss.org/hibernate/orm/6.2/javadocs/org/hibernate/SessionFactory.html"},"SessionFactory"),"\u548c",(0,i.kt)("a",{parentName:"p",href:"https://docs.jboss.org/hibernate/orm/6.2/javadocs/org/hibernate/Session.html"},"Session"),"\uff0cMyBatis\u7684",(0,i.kt)("a",{parentName:"p",href:"https://javadoc.io/doc/org.mybatis/mybatis/latest/org/apache/ibatis/session/SqlSessionFactory.html"},"SqlSessionFactory"),"\u548c",(0,i.kt)("a",{parentName:"p",href:"https://javadoc.io/doc/org.mybatis/mybatis/latest/org/apache/ibatis/session/SqlSession.html"},"SqlSession"),"\u3002\u5176\u4e2d\u6709\u72b6\u6001\u5bf9\u8c61\u8fd8\u5bf9JDBC\u4e8b\u52a1\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u6bd4\u5982JPA\u7684",(0,i.kt)("a",{parentName:"p",href:"https://docs.oracle.com/javaee/7/api/javax/persistence/EntityManager.html#getTransaction--"},"EntityManager.getTransaction"),"\uff0cHibernate\u7684",(0,i.kt)("a",{parentName:"p",href:"https://docs.jboss.org/hibernate/orm/6.2/javadocs/org/hibernate/SharedSessionContract.html#getTransaction()"},"Session.getTransaction"),"\uff0cMyBatis\u7684",(0,i.kt)("a",{parentName:"p",href:"https://javadoc.io/doc/org.mybatis/mybatis/latest/org/apache/ibatis/session/SqlSession.html#commit()"},"SqlSession.commit"),"\u3002"),(0,i.kt)("p",null,"Jimmer\u6ca1\u6709\u7c7b\u4f3c\u7684\u62bd\u8c61\uff0c\u4e00\u4e2a\u65e0\u72b6\u6001\u7684\u5168\u5c40SqlClient\u5bf9\u8c61\u5c31\u662f\u6240\u6709API\u7684\u5165\u53e3\uff0c\u4e5f\u6ca1\u6709\u5c01\u88c5JDBC\u4e8b\u52a1\u3002"),(0,i.kt)("p",null,"ORM\u672c\u8eab\u5e94\u8be5\u4fdd\u6301\u9ad8\u5ea6\u7684\u4f53\u7cfb\u4e2d\u7acb\uff0c\u5176\u5e95\u5c42API\u4e0d\u5e94\u8be5\u548cspring\u3001quarkus\u7b49\u80f6\u6c34\u6846\u67b6\u8026\u5408\u3002Jimmer\u8fd9\u6837\u7684\u6781\u7b80\u8bbe\u8ba1\u5e26\u6765\u4e86\u4e00\u4e2a\u660e\u663e\u7684\u597d\u5904\uff0c\u5c31\u662f\u548c\u80f6\u6c34\u6846\u67b6\u7684\u8026\u5408\u975e\u5e38\u7b80\u5355\u3002"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u5047\u5982"),"jimmer\u672c\u8eab\u6ca1\u6709\u63d0\u4f9bspring\u6574\u5408\u7684\u80fd\u529b\uff0c\u9700\u8981\u7528\u6237\u81ea\u5df1\u628ajimmer\u6574\u5408\u5230spring ",(0,i.kt)("em",{parentName:"p"},"(\u6ce8\u610f\uff0c\u4e0d\u662fspring-data)")," \u4e2d\uff0c\u4e5f\u975e\u5e38\u5bb9\u6613\uff0c\u6574\u5408\u96be\u5ea6\u8fdc\u4f4e\u4e8e\u540c\u7c7b\u6846\u67b6\u3002")))}M.isMDXComponent=!0},8614:function(e,t,a){t.Z=a.p+"assets/medias/java-fetcher-a47c6f710d4cc259e540c4a5909ae021.mp4"},7714:function(e,t,a){t.Z=a.p+"assets/medias/kotlin-fetcher-b8ddc7a4ad25644d36d580ac726ec13f.mp4"},684:function(e,t,a){t.Z=a.p+"assets/images/association-cache-a56183bba7a369821e88cbfb277c9464.png"},6385:function(e,t,a){t.Z=a.p+"assets/images/calculated-cache-fed29948e1b2f8fb93bf45851e5668b3.png"},9874:function(e,t,a){t.Z=a.p+"assets/images/dto-explosion-6378b16724c3f56c64ffdb8d0131f9c8.png"},8209:function(e,t,a){t.Z=a.p+"assets/images/jimmer-mind-2aae505de5f8cb921268cffc3f3fae74.svg"},917:function(e,t,a){t.Z=a.p+"assets/images/multi-view-cache-76f3c4c61bce71a30c72922f931a641f.png"},372:function(e,t,a){t.Z=a.p+"assets/images/object-cache-4a9d5b4cb61322890552a5508785c18c.jpeg"}}]);